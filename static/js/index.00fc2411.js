(()=>{"use strict";var e={57706:function(e,t,i){var s,n,a,o,r,l,d=i(85893),h=i(67294),c=i(20745),p=i(61588);let m=[1e3,1001,1005,1006];var g=((s={}).DISCONNECTED="disconnected",s.CONNECTING="connecting",s.CONNECTED="connected",s.RECONNECTING="reconnecting",s.ERROR="error",s);function u(e){let t=e,i=new Set;return{get:()=>t,set:e=>{t=e,i.forEach(t=>t(e))},subscribe:e=>(i.add(e),()=>i.delete(e))}}let y=(e,t)=>{let i,s=new p.Client(e),n=u(void 0),a=u(void 0),o=u([]),r=u("disconnected"),l=u(null),d=!1,c=0,g=null,y=(e,t)=>{if(n.set(e),i=e.reconnectionToken,r.set("connected"),c=0,e.onError((e,t)=>{console.error(`Room error: ${e} - ${t}`),l.set({code:e,message:t}),m.includes(e)&&c<5?x():r.set("error")}),e.onLeave(e=>{n.set(void 0),m.includes(e)&&c<5?x():(a.set(void 0),o.set([]),r.set("disconnected"),i=void 0)}),t)e.onMessage("rooms",e=>{o.set(e)}),e.onMessage("+",e=>{let[t,i]=e,s=o.get(),n=s.findIndex(e=>e.roomId===t);if(-1!==n){let e=[...s];e[n]={...e[n],...i},o.set(e)}else o.set([...s,i])}),e.onMessage("-",e=>{o.set(o.get().filter(t=>t.roomId!==e))});else{a.set(e.state);let t={};e.onStateChange.once(i=>{let s=(0,p.getStateCallbacks)(e);for(let e of Object.keys(i)){let n=s(i)[e];"object"==typeof i[e]&&(t[e]=!1,n.onAdd(i=>{t[e]=!0,s(i).onChange(()=>{t[e]=!0})}),n.onRemove(()=>{t[e]=!0}))}}),e.onStateChange(e=>{if(!e)return;let i={...e};for(let[s,n]of Object.entries(t)){if(!n)continue;t[s]=!1;let a=e[s];a.clone&&(i[s]=a.clone())}a.set(i)})}},f=async e=>{let{roomName:i,roomId:a,forceCreate:o=!1,isLobby:h=!1,options:p={}}=e;if(!(d||n.get())){g={roomName:i,roomId:a,forceCreate:o,isLobby:h,options:p},r.set("connecting"),l.set(null),d=!0;try{let e;if(i)e=o?await s.create(i,p):await s.joinOrCreate(i,p);else if(a)e=await s.joinById(a,p,t);else throw Error("Must provide either roomName or roomId");y(e,h)}catch(e){console.error("Failed to connect to Colyseus!",e),l.set({message:e instanceof Error?e.message:"Unknown connection error"}),r.set("error"),c<5&&x()}finally{d=!1}}},x=async()=>{if(c>=5){console.error("Max reconnection attempts reached"),r.set("error");return}if(c++,r.set("reconnecting"),i&&1)try{let e=await s.reconnect(i);y(e,(null==g?void 0:g.isLobby)||!1)}catch(e){setTimeout(x,1e3*Math.pow(1.5,c))}else g?(d=!1,f(g)):r.set("error")};return{client:s,connect:f,disconnectFromColyseus:async()=>{c=0,g=null,i=void 0;let e=n.get();if(e){n.set(void 0),a.set(void 0),o.set([]),r.set("disconnected");try{await e.leave()}catch(e){console.error("Error during disconnection:",e)}}},useColyseusRoom:()=>(0,h.useSyncExternalStore)(e=>n.subscribe(e),()=>n.get()),useColyseusState:function(e){return(0,h.useSyncExternalStore)(e=>a.subscribe(e),()=>{let t=a.get();return t&&e?e(t):t})},useLobbyRooms:()=>(0,h.useSyncExternalStore)(e=>o.subscribe(e),()=>o.get()),useConnectionStatus:()=>(0,h.useSyncExternalStore)(e=>r.subscribe(e),()=>r.get()),useConnectionError:()=>(0,h.useSyncExternalStore)(e=>l.subscribe(e),()=>l.get())}},{connect:f,disconnectFromColyseus:x,useColyseusRoom:b,useColyseusState:P,useConnectionStatus:v,useConnectionError:w}=y("https://delixia-server.triformine.dev/"),{connect:_,disconnectFromColyseus:T,useLobbyRooms:S,useConnectionStatus:M,useConnectionError:I}=y("https://delixia-server.triformine.dev/");var C=i(27412),z=i(88052),k=i(87165),N=i(9263),E=i(83927),A=i(91919),D=i(36631),L=i(92962),R=i(58098),j=i(78302),O=i(67589),F=i(36310),B=i(47117),G=i(82915),K=i(2970);i(97991);var U=i(90744),H=i(94803);class V{createLoadingUI(){var e;this.loadingDiv=document.createElement("div"),this.loadingDiv.className=`
      fixed inset-0
      flex flex-col
      bg-base-200 bg-opacity-90
      transition-opacity duration-500
      opacity-0
      z-50
      pointer-events-none
    `,this.loadingDiv.innerHTML=`
  <!-- Center container -->
  <div class="flex flex-col items-center justify-center h-full max-w-2xl mx-auto px-6">
    <!-- Game Title avec gradient appliqu\xe9 sur le texte -->
    <div class="text-center mb-12">
      <h1 class="text-5xl md:text-6xl font-bold mb-2 tracking-wider animate-pulse bg-gradient-to-br from-purple-300 via-pink-200 to-yellow-100 bg-clip-text text-transparent">
        Delixia
      </h1>
      <div class="h-1 w-24 mx-auto bg-gradient-to-r from-purple-300 via-pink-200 to-yellow-100 rounded-full"></div>
    </div>

    <!-- Loading text (vous pouvez aussi appliquer un d\xe9grad\xe9 ici si besoin) -->
    <div class="w-full text-center mb-8">
      <p id="loading-text" class="text-xl md:text-2xl font-medium text-base-content opacity-80 tracking-wide">
        Loading...
      </p>
    </div>

    <!-- Progress bar et indicateur -->
    <div class="w-full">
      <div class="relative">
        <div class="absolute inset-0 bg-primary/20 rounded-full blur-md transform scale-105"></div>
        <div class="relative bg-base-100/80 rounded-full h-3 backdrop-blur-sm">
          <div
  id="progress-bar-fill"
  class="h-full bg-gradient-to-r from-purple-300 via-pink-200 to-yellow-100 rounded-full transition-all duration-300 shadow-lg shadow-yellow-200/50"
  style="width: 0%;"
></div>

        </div>
      </div>
      <div class="flex justify-center gap-2 mt-4">
  <div class="w-2 h-2 bg-gradient-to-r from-purple-300 via-pink-200 to-yellow-100 rounded-full animate-bounce" style="animation-delay: 0s"></div>
  <div class="w-2 h-2 bg-gradient-to-r from-purple-300 via-pink-200 to-yellow-100 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
  <div class="w-2 h-2 bg-gradient-to-r from-purple-300 via-pink-200 to-yellow-100 rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
</div>

    </div>
  </div>
`,null===(e=this.canvas.parentElement)||void 0===e||e.appendChild(this.loadingDiv),this.progressBar=this.loadingDiv.querySelector("#progress-bar-fill")??void 0,this.loadingTextElement=this.loadingDiv.querySelector("#loading-text")??void 0}displayLoadingUI(){this.loadingDiv&&(this.loadingTextElement&&(this.loadingTextElement.innerText=this.loadingUIText||"Loading..."),this.loadingDiv.style.opacity="1")}hideLoadingUI(){this.loadingDiv&&(this.loadingDiv.style.opacity="0")}updateProgress(e){this.progressBar&&(this.progressBar.style.width=`${e.toFixed(0)}%`),this.loadingTextElement&&(this.loadingTextElement.innerText=this.loadingUIText)}constructor(e){(0,C._)(this,"canvas",void 0),(0,C._)(this,"loadingUIText",void 0),(0,C._)(this,"loadingUIBackgroundColor",void 0),(0,C._)(this,"loadingDiv",void 0),(0,C._)(this,"progressBar",void 0),(0,C._)(this,"loadingTextElement",void 0),this.canvas=e,this.loadingUIText="",this.loadingUIBackgroundColor="rgba(0, 0, 0, 0.8)",this.createLoadingUI()}}let W=e=>{let{antialias:t,engineOptions:i,adaptToDeviceRatio:s,sceneOptions:n,onRender:a,onSceneReady:o,...r}=e,l=(0,h.useRef)(null),c=(0,h.useRef)(null),p=(0,h.useRef)(!1),[m,g]=h.useState(!1);return(0,h.useEffect)(()=>{let{current:e}=l;if(e&&!m)return(async()=>{let n;if(!c.current&&!p.current){if(p.current=!0,await H.f.IsSupportedAsync){let t=new H.f(e,i);await t.initAsync(),(n=t).compatibilityMode=!1}else n=new U.D(e,t,i,s);n.loadingScreen=new V(e),c.current=n,p.current=!1,g(!0),n.displayLoadingUI()}})().catch(console.error),()=>{g(!1),c.current&&(c.current.dispose(),c.current=null)}},[t,i,s]),(0,h.useEffect)(()=>{let e;if(m)return(async()=>{let t=c.current;e=new K.x(t,n);let i=async()=>{null==e||e.onBeforeRenderObservable.add(()=>{e&&(null==a||a(e))}),t.runRenderLoop(()=>{e&&e.activeCamera&&e.render()})};e.isReady()?(await o(e),await i()):e.onReadyObservable.addOnce(async e=>{await o(e),await i()});let s=()=>{t.resize(!0)};return window&&window.addEventListener("resize",s),()=>{null==e||e.getEngine().dispose(),window&&window.removeEventListener("resize",s)}})().catch(console.error),()=>{e&&e.dispose()}},[m,a,o,n]),(0,d.jsx)("canvas",{ref:l,...r,tabIndex:0})};var q=i(40023),$=((n={})[n.Fridge=0]="Fridge",n[n.Oven=1]="Oven",n[n.Counter=2]="Counter",n[n.ChoppingBoard=3]="ChoppingBoard",n[n.Sink=4]="Sink",n[n.Stock=5]="Stock",n[n.Ingredient=6]="Ingredient",n[n.Trash=7]="Trash",n[n.ServingOrder=8]="ServingOrder",n),J=((a={})[a.None=0]="None",a[a.Nori=1]="Nori",a[a.Rice=2]="Rice",a[a.Onigiri=3]="Onigiri",a[a.Plate=4]="Plate",a),Q=i(8932),X=i(72023);function Y(e){let t=JSON.stringify(e,(e,t)=>{if("hash"!==e){if(Array.isArray(t))return t.slice().sort((e,t)=>{let i=JSON.stringify(e),s=JSON.stringify(t);return i<s?-1:+(i>s)});if(t&&"object"==typeof t&&!(t instanceof Date)){let e={};return Object.keys(t).sort().forEach(i=>{e[i]=t[i]}),e}return t}});return(0,X.sha256)(t)}let Z=Q.z.object({id:Q.z.number().optional(),interactType:Q.z.nativeEnum($),ingredient:Q.z.nativeEnum(J).optional()}),ee=Q.z.object({map:Q.z.string(),fileName:Q.z.string(),defaultScaling:Q.z.object({x:Q.z.number().optional(),y:Q.z.number().optional(),z:Q.z.number().optional()}).optional(),billboardOffset:Q.z.object({x:Q.z.number(),y:Q.z.number(),z:Q.z.number()}).optional(),defaultPhysics:Q.z.object({shapeType:Q.z.nativeEnum(q.Bq),mass:Q.z.number().optional(),friction:Q.z.number().optional(),restitution:Q.z.number().optional()}).optional(),interaction:Z.optional(),instances:Q.z.array(Q.z.object({position:Q.z.object({x:Q.z.number(),y:Q.z.number(),z:Q.z.number()}),rotation:Q.z.object({x:Q.z.number().optional(),y:Q.z.number().optional(),z:Q.z.number().optional()}).optional(),scaling:Q.z.object({x:Q.z.number().optional(),y:Q.z.number().optional(),z:Q.z.number().optional()}).optional(),physics:Q.z.object({shapeType:Q.z.number(),mass:Q.z.number().optional(),friction:Q.z.number().optional(),restitution:Q.z.number().optional()}).optional(),interaction:Z.optional()})),hash:Q.z.string().optional()}),et=function(e){for(let t of e)ee.parse(t);return e}(function(e){let t={};for(let i of e)for(let e of i.instances)if(e.interaction){let i=e.interaction.interactType,s=e.interaction.ingredient??J.None,n=`${i}_${s}`;t[n]||(t[n]=0),e.interaction.id=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.None,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(e+1)*1e6+1e3*t+Math.min(Math.max(i,0),999)}(i,s,t[n]),t[n]++}let i=Y(e);for(let t of e)t.hash=i;return e}([{map:"japan",fileName:"Table.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},instances:[{position:{x:5,y:3.5,z:-5},rotation:{y:Math.PI},scaling:{x:1,y:.5,z:1}},{position:{x:-5,y:3.5,z:-5},rotation:{y:Math.PI},scaling:{x:1,y:.5,z:1}},{position:{x:0,y:2,z:-2},rotation:{y:Math.PI/2},scaling:{x:2.5,y:.5,z:.75}},{position:{x:-8,y:0,z:-8},rotation:{y:Math.PI},scaling:{x:.75,y:.5,z:.75}},{position:{x:8,y:0,z:-8},rotation:{y:Math.PI},scaling:{x:.75,y:.5,z:.75}},{position:{x:0,y:0,z:-7.85},rotation:{y:Math.PI},scaling:{x:1,y:.5,z:1}},{position:{x:-8,y:0,z:8},rotation:{y:Math.PI},scaling:{x:.75,y:.5,z:.75}},{position:{x:8,y:0,z:8},rotation:{y:Math.PI},scaling:{x:.75,y:.5,z:.75}},{position:{x:-7.85,y:0,z:0},rotation:{y:Math.PI},scaling:{x:1,y:.5,z:1}},{position:{x:7.85,y:0,z:0},rotation:{y:Math.PI},scaling:{x:1,y:.5,z:1}}]},{map:"japan",fileName:"cloud1.glb",defaultScaling:{x:.2,y:.2,z:.2},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},instances:[{position:{x:8,y:.4,z:-7},interaction:{interactType:$.ServingOrder}},{position:{x:7,y:.4,z:-8},rotation:{y:Math.PI},interaction:{interactType:$.ServingOrder}},{position:{x:-7,y:.4,z:-8},interaction:{interactType:$.ServingOrder}},{position:{x:-8,y:.4,z:-7},rotation:{y:Math.PI},interaction:{interactType:$.ServingOrder}},{position:{x:5,y:3.75,z:-3.5}},{position:{x:5,y:3.75,z:-6.5}},{position:{x:3.5,y:3.75,z:-5}},{position:{x:6.5,y:3.75,z:-5}},{position:{x:5.95,y:3.5,z:-4.2},scaling:{x:.1,y:.1,z:.1}},{position:{x:4.07,y:3.5,z:-4.2},scaling:{x:.1,y:.1,z:.1}},{position:{x:5.95,y:3.5,z:-5.95},scaling:{x:.1,y:.1,z:.1}},{position:{x:4.07,y:3.5,z:-5.85},scaling:{x:.1,y:.1,z:.1}},{position:{x:-5,y:3.75,z:-3.5}},{position:{x:-5,y:3.75,z:-6.5}},{position:{x:-3.5,y:3.75,z:-5}},{position:{x:-6.5,y:3.75,z:-5}},{position:{x:-5.95,y:3.5,z:-4.2},scaling:{x:.1,y:.1,z:.1}},{position:{x:-4.07,y:3.5,z:-4.2},scaling:{x:.1,y:.1,z:.1}},{position:{x:-5.95,y:3.5,z:-5.95},scaling:{x:.1,y:.1,z:.1}},{position:{x:-4.07,y:3.5,z:-5.85},scaling:{x:.1,y:.1,z:.1}},{position:{x:0,y:2.25,z:-.75}},{position:{x:0,y:2.25,z:-3.2}},{position:{x:-1.5,y:2.25,z:-.75}},{position:{x:-1.5,y:2.25,z:-3.2}},{position:{x:1.5,y:2.25,z:-.75}},{position:{x:1.5,y:2.25,z:-3.2}},{position:{x:-2.2,y:2,z:-1.3},scaling:{x:.2,y:.1,z:.1}},{position:{x:2.1,y:2,z:-1.3},scaling:{x:.2,y:.1,z:.1}},{position:{x:-2.2,y:2,z:-2.7},scaling:{x:.2,y:.1,z:.1}},{position:{x:2.1,y:2,z:-2.7},scaling:{x:.2,y:.1,z:.1}},{position:{x:8,y:.4,z:7}},{position:{x:7,y:.4,z:8},rotation:{y:Math.PI}},{position:{x:-7,y:.4,z:8}},{position:{x:-8,y:.4,z:7},rotation:{y:Math.PI}},{position:{x:-7.8,y:.4,z:1.35}},{position:{x:-6.5,y:.4,z:0},rotation:{y:Math.PI}},{position:{x:-7.8,y:.4,z:-1.35}},{position:{x:7.8,y:.4,z:1.35}},{position:{x:6.5,y:.4,z:0},rotation:{y:Math.PI}},{position:{x:7.8,y:.4,z:-1.35}},{position:{x:1.35,y:.4,z:-7.8},interaction:{interactType:$.ServingOrder}},{position:{x:0,y:.4,z:-6.5},rotation:{y:Math.PI},interaction:{interactType:$.ServingOrder}},{position:{x:-1.35,y:.4,z:-7.8},interaction:{interactType:$.ServingOrder}}]},{map:"japan",fileName:"Shoji Wall.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},instances:[{position:{x:-8,y:.1,z:8}},{position:{x:-8,y:.1,z:8},rotation:{y:-Math.PI/2}},{position:{x:8,y:.1,z:8}},{position:{x:8,y:.1,z:8},rotation:{y:Math.PI/2}},{position:{x:8,y:.1,z:-8},rotation:{y:Math.PI/2}},{position:{x:8,y:.1,z:-8},rotation:{y:-Math.PI}},{position:{x:-8,y:.1,z:-8},rotation:{y:Math.PI}},{position:{x:-8,y:.1,z:-8},rotation:{y:-Math.PI/2}},{position:{x:0,y:.1,z:8}},{position:{x:0,y:.1,z:-8},rotation:{y:Math.PI}},{position:{x:-8,y:.1,z:0},rotation:{y:-Math.PI/2}},{position:{x:8,y:.1,z:0},rotation:{y:Math.PI/2}}]},{map:"japan",fileName:"Normal Wall.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},instances:[{position:{x:2,y:.1,z:8}},{position:{x:6,y:.1,z:8}},{position:{x:-2,y:.1,z:8}},{position:{x:-6,y:.1,z:8}},{position:{x:4,y:.1,z:8}},{position:{x:-4,y:.1,z:8}},{position:{x:2,y:.1,z:-8},rotation:{y:Math.PI}},{position:{x:6,y:.1,z:-8},rotation:{y:Math.PI}},{position:{x:-2,y:.1,z:-8},rotation:{y:Math.PI}},{position:{x:-6,y:.1,z:-8},rotation:{y:Math.PI}},{position:{x:-8,y:.1,z:2},rotation:{y:-Math.PI/2}},{position:{x:-8,y:.1,z:6},rotation:{y:-Math.PI/2}},{position:{x:-8,y:.1,z:-2},rotation:{y:-Math.PI/2}},{position:{x:-8,y:.1,z:-6},rotation:{y:-Math.PI/2}},{position:{x:8,y:.1,z:2},rotation:{y:Math.PI/2}},{position:{x:8,y:.1,z:6},rotation:{y:Math.PI/2}},{position:{x:8,y:.1,z:-2},rotation:{y:Math.PI/2}},{position:{x:8,y:.1,z:-6},rotation:{y:Math.PI/2}}]},{map:"japan",fileName:"Wall with Shelves.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},instances:[{position:{x:4,y:.1,z:-8},rotation:{y:Math.PI}},{position:{x:-4,y:.1,z:-8},rotation:{y:Math.PI}},{position:{x:-8,y:.1,z:4},rotation:{y:-Math.PI/2}},{position:{x:-8,y:.1,z:-4},rotation:{y:-Math.PI/2}},{position:{x:8,y:.1,z:4},rotation:{y:Math.PI/2}},{position:{x:8,y:.1,z:-4},rotation:{y:Math.PI/2}}]},{map:"japan",fileName:"Plate.glb",defaultScaling:{x:.5,y:1.5,z:.5},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},instances:[{position:{x:2.9,y:1.15,z:8.6}}]},{map:"japan",fileName:"Fridge.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},billboardOffset:{x:0,y:1,z:-.8},instances:[{position:{x:2.9,y:.15,z:8.6},interaction:{interactType:$.Fridge}},{position:{x:-2.9,y:.15,z:8.6},interaction:{interactType:$.Fridge}}]},{map:"japan",fileName:"Oven.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},billboardOffset:{x:0,y:1.5,z:0},instances:[{interaction:{interactType:$.Oven},position:{x:-1.75,y:.1,z:8.5}},{interaction:{interactType:$.Oven},position:{x:1.75,y:.1,z:8.5}}]},{map:"japan",fileName:"Nori.glb",defaultScaling:{x:.4,y:.4,z:.4},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},billboardOffset:{x:0,y:.5,z:0},instances:[{interaction:{interactType:$.Stock,ingredient:J.Nori},position:{x:4,y:1.15,z:6},rotation:{x:0,y:0,z:0}}]},{map:"japan",fileName:"Rice Ball.glb",defaultScaling:{x:.4,y:.4,z:.4},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},billboardOffset:{x:0,y:.5,z:0},instances:[{interaction:{interactType:$.Stock,ingredient:J.Rice},position:{x:4,y:1.15,z:3},rotation:{x:0,y:0,z:0}}]},{map:"japan",fileName:"Plate.glb",defaultScaling:{x:.7,y:.35,z:.7},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},billboardOffset:{x:0,y:.5,z:0},instances:[{position:{x:0,y:1.05,z:4.75},rotation:{x:0,y:0,z:0}},{position:{x:0,y:1.09,z:4.75},rotation:{x:0,y:0,z:0}},{position:{x:0,y:1.13,z:4.75},rotation:{x:0,y:0,z:0}},{position:{x:0,y:1.17,z:4.75},rotation:{x:0,y:0,z:0}},{interaction:{interactType:$.Stock,ingredient:J.Plate},position:{x:0,y:1.21,z:4.75},rotation:{x:0,y:0,z:0}}]},{map:"japan",fileName:"Chopping board.glb",defaultScaling:{x:.4,y:.4,z:.4},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},billboardOffset:{x:0,y:.5,z:0},instances:[{position:{x:.5,y:1.05,z:8.5},rotation:{x:0,y:0,z:0},interaction:{interactType:$.ChoppingBoard}},{position:{x:-.5,y:1.05,z:8.5},rotation:{x:0,y:0,z:0},interaction:{interactType:$.ChoppingBoard}}]},{map:"japan",fileName:"Counter Straight.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},instances:[{position:{x:0,y:.1,z:2},rotation:{y:Math.PI}},{position:{x:4,y:.1,z:6},rotation:{y:Math.PI/2}},{position:{x:4,y:.1,z:8},rotation:{y:Math.PI/2}},{position:{x:4,y:.1,z:3},rotation:{y:Math.PI/2}},{position:{x:-4,y:.1,z:6},rotation:{y:-Math.PI/2}},{position:{x:-4,y:.1,z:8},rotation:{y:-Math.PI/2}},{position:{x:-4,y:.1,z:3},rotation:{y:-Math.PI/2}},{position:{x:0,y:.1,z:8.6},rotation:{y:Math.PI},scaling:{x:.75,y:.5,z:.6}},{position:{x:0,y:.1,z:5.25},scaling:{x:.9,y:.5,z:1.25}}]},{map:"japan",fileName:"Counter Corner.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.MESH,mass:0,friction:.8,restitution:.1},instances:[{position:{x:4,y:.1,z:2},rotation:{y:Math.PI/2}},{position:{x:-4,y:.1,z:2},rotation:{y:Math.PI}}]},{map:"japan",fileName:"Counter Sink.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.MESH,mass:0,friction:.8,restitution:.1},billboardOffset:{x:0,y:1.5,z:0},instances:[{position:{x:-2,y:.1,z:2},rotation:{y:Math.PI},interaction:{interactType:$.Trash}},{position:{x:2,y:.1,z:2},rotation:{y:Math.PI},interaction:{interactType:$.Trash}}]},{map:"japan",fileName:"Wood Floor.glb",defaultScaling:{x:.5,y:.5,z:.5},defaultPhysics:{shapeType:q.Bq.BOX,mass:0,friction:.8,restitution:.1},instances:(()=>{let e=[];for(let t=-4;t<5;t++)for(let i=-4;i<5;i++)e.push({position:{x:2*t,y:.1,z:2*i}});return e})()}]));var ei=i(13626),es=i(25677),en=i(1353),ea=i(42881),eo=i(9197),er=((o={}).Escape="Escape",o.Digit1="Digit1",o.Digit2="Digit2",o.Digit3="Digit3",o.Digit4="Digit4",o.Digit5="Digit5",o.Digit6="Digit6",o.Digit7="Digit7",o.Digit8="Digit8",o.Digit9="Digit9",o.Digit0="Digit0",o.Minus="Minus",o.Equal="Equal",o.Backspace="Backspace",o.Tab="Tab",o.KeyQ="KeyQ",o.KeyW="KeyW",o.KeyE="KeyE",o.KeyR="KeyR",o.KeyT="KeyT",o.KeyY="KeyY",o.KeyU="KeyU",o.KeyI="KeyI",o.KeyO="KeyO",o.KeyP="KeyP",o.BracketLeft="BracketLeft",o.BracketRight="BracketRight",o.Enter="Enter",o.ControlLeft="ControlLeft",o.KeyA="KeyA",o.KeyS="KeyS",o.KeyD="KeyD",o.KeyF="KeyF",o.KeyG="KeyG",o.KeyH="KeyH",o.KeyJ="KeyJ",o.KeyK="KeyK",o.KeyL="KeyL",o.Semicolon="Semicolon",o.Quote="Quote",o.Backquote="Backquote",o.ShiftLeft="ShiftLeft",o.Backslash="Backslash",o.KeyZ="KeyZ",o.KeyX="KeyX",o.KeyC="KeyC",o.KeyV="KeyV",o.KeyB="KeyB",o.KeyN="KeyN",o.KeyM="KeyM",o.Comma="Comma",o.Period="Period",o.Slash="Slash",o.ShiftRight="ShiftRight",o.NumpadMultiply="NumpadMultiply",o.AltLeft="AltLeft",o.Space="Space",o.CapsLock="CapsLock",o.F1="F1",o.F2="F2",o.F3="F3",o.F4="F4",o.F5="F5",o.F6="F6",o.F7="F7",o.F8="F8",o.F9="F9",o.F10="F10",o.Numpad7="Numpad7",o.Numpad8="Numpad8",o.Numpad9="Numpad9",o.NumpadSubtract="NumpadSubtract",o.Numpad4="Numpad4",o.Numpad5="Numpad5",o.Numpad6="Numpad6",o.NumpadAdd="NumpadAdd",o.Numpad1="Numpad1",o.Numpad2="Numpad2",o.Numpad3="Numpad3",o.Numpad0="Numpad0",o.NumpadDecimal="NumpadDecimal",o.IntlBackslash="IntlBackslash",o.F11="F11",o.F12="F12",o.NumpadEqual="NumpadEqual",o.F13="F13",o.F14="F14",o.F15="F15",o.F16="F16",o.F17="F17",o.F18="F18",o.F19="F19",o.F20="F20",o.Lang2="Lang2",o.Lang1="Lang1",o.IntlRo="IntlRo",o.IntlYen="IntlYen",o.NumpadComma="NumpadComma",o.NumpadEnter="NumpadEnter",o.ControlRight="ControlRight",o.NumpadDivide="NumpadDivide",o.AltRight="AltRight",o.NumLock="NumLock",o.Home="Home",o.ArrowUp="ArrowUp",o.PageUp="PageUp",o.ArrowLeft="ArrowLeft",o.ArrowRight="ArrowRight",o.End="End",o.ArrowDown="ArrowDown",o.PageDown="PageDown",o.Delete="Delete",o.MetaLeft="MetaLeft",o.MetaRight="MetaRight",o.ContextMenu="ContextMenu",o),el=i(71218);function ed(e,t,i){return Math.abs(t-e)<=i?t:e+Math.sign(t-e)*i}var eh=((r={}).IDLE="IDLE",r.WALKING="WALKING",r.JUMPING="JUMPING",r.LANDING="LANDING",r.FALLING="FALLING",r.DANCING="DANCING",r);class ec{dropIngredient(){this.currentIngredientMesh&&(this.currentIngredientMesh.dispose(),this.currentIngredientMesh=void 0),this.ingredient=J.None}pickupIngredient(e){!this.ingredient&&(this.holdingPlate&&e!==J.Onigiri||this.forceSetIngredient(e))}forceSetIngredient(e){if(e===J.None){this.currentIngredientMesh&&(this.currentIngredientMesh.dispose(),this.currentIngredientMesh=void 0);return}if(this.ingredient=e,this.updatePlateMesh(),this.ingredientLoader)for(let t of(this.currentIngredientMesh&&this.currentIngredientMesh.dispose(),this.currentIngredientMesh=this.ingredientLoader.getIngredientMesh(e),this.currentIngredientMesh.parent=this.model,this.holdingPlate?this.currentIngredientMesh.position=new R.P(0,.55,.4):this.currentIngredientMesh.position=new R.P(0,.5,.4),this.currentIngredientMesh.rotationQuaternion=R._f.Identity(),this.currentIngredientMesh.scaling=new R.P(.5,.5,.5),this.currentIngredientMesh.isPickable=!1,this.currentIngredientMesh.getChildMeshes()))t.isPickable=!1}pickupPlate(){this.ingredient===J.None&&this.forcePickupPlate()}forcePickupPlate(){this.holdingPlate=!0,this.updatePlateMesh()}dropPlate(){this.holdingPlate=!1,this.plateMesh&&(this.plateMesh.dispose(),this.plateMesh=void 0)}updatePlateMesh(){this.holdingPlate&&(this.plateMesh&&this.plateMesh.dispose(),this.ingredientLoader&&(this.plateMesh=this.ingredientLoader.getIngredientMesh(J.Plate),this.plateMesh.parent=this.model,this.plateMesh.position=new R.P(0,.5,.4),this.plateMesh.rotationQuaternion=R._f.Identity(),this.plateMesh.scaling=new R.P(.5,.5,.5),this.plateMesh.isPickable=!1))}get holdedIngredient(){return this.ingredient}get isHoldingPlate(){return this.holdingPlate}set isHoldingPlate(e){e&&!this.holdingPlate?this.pickupPlate():!e&&this.holdingPlate&&this.dropPlate()}get position(){return this.impostorMesh.position}get rotation(){return this.impostorMesh.rotationQuaternion}get getTargetAnim(){return this.targetAnim}getTransform(){return this.impostorMesh}setPosition(e){this.impostorMesh.position=e}setRotation(e){this.impostorMesh.rotationQuaternion=e}setRotationY(e){this.impostorMesh.rotationQuaternion=R._f.RotationAxis(R.P.Up(),e)}update(e){}dispose(){this.currentIngredientMesh&&this.currentIngredientMesh.dispose(),this.plateMesh&&this.plateMesh.dispose(),this.impostorMesh.dispose(),this.model.dispose(),this.physicsAggregate.dispose()}updateAnimations(e){let t=this.idleAnim;switch(this.currentState){case eh.IDLE:t=this.idleAnim;break;case eh.WALKING:t=this.walkAnim;break;case eh.JUMPING:t=this.jumpAnim;break;case eh.FALLING:t=this.fallingAnim;break;case eh.LANDING:t=this.landingAnim;break;case eh.DANCING:t=this.sambaDanceAnim}this.targetAnim=t;let i=0;for(let s of this.nonIdleAnimations){if(s===t){if(s.weight=ed(s.weight,1,this.animationBlendSpeed*e),!s.isPlaying){let e=s===this.fallingAnim||s===this.walkAnim||s===this.sambaDanceAnim;s.play(e)}}else s.weight=ed(s.weight,0,this.animationBlendSpeed*e),0===s.weight&&s.isPlaying&&s.pause();i+=s.weight}this.idleAnim.weight=ed(this.idleAnim.weight,Math.max(1-i,0),this.animationBlendSpeed*e),this.idleAnim.weight>0&&!this.idleAnim.isPlaying&&this.idleAnim.play(!0)}constructor(e,t,i,s){(0,C._)(this,"ingredientLoader",void 0),(0,C._)(this,"currentIngredientMesh",void 0),(0,C._)(this,"plateMesh",void 0),(0,C._)(this,"scene",void 0),(0,C._)(this,"model",void 0),(0,C._)(this,"physicsAggregate",void 0),(0,C._)(this,"moveSpeed",1.8),(0,C._)(this,"rotationSpeed",6),(0,C._)(this,"animationBlendSpeed",4),(0,C._)(this,"jumpForce",5),(0,C._)(this,"walkAnim",void 0),(0,C._)(this,"idleAnim",void 0),(0,C._)(this,"jumpAnim",void 0),(0,C._)(this,"landingAnim",void 0),(0,C._)(this,"fallingAnim",void 0),(0,C._)(this,"sambaDanceAnim",void 0),(0,C._)(this,"nonIdleAnimations",void 0),(0,C._)(this,"thirdPersonCamera",void 0),(0,C._)(this,"targetAnim",void 0),(0,C._)(this,"impostorMesh",void 0),(0,C._)(this,"currentState",eh.IDLE),(0,C._)(this,"ingredient",J.None),(0,C._)(this,"holdingPlate",!1),this.scene=t,this.ingredientLoader=i,this.impostorMesh=j.V.CreateCapsule("CharacterTransform",{height:1.5,radius:.3},t),this.impostorMesh.visibility=0,this.impostorMesh.rotationQuaternion=R._f.Identity(),this.impostorMesh.position.y=1,this.impostorMesh.position.x=0,this.impostorMesh.position.z=5,this.impostorMesh.isPickable=!1,this.model=e,this.model.parent=this.impostorMesh,this.model.rotate(R.P.Up(),Math.PI),this.model.position.y=-.75,e.isPickable=!1,this.model.getChildMeshes().forEach(e=>{e.isPickable=!1,e.receiveShadows=!0});let n=s.find(e=>"Walking"===e.name);if(void 0===n)throw Error("'Walking' animation not found");this.walkAnim=n,this.walkAnim.weight=0;let a=s.find(e=>"SambaDancing"===e.name);if(void 0===a)throw Error("'SambaDancing' animation not found");this.sambaDanceAnim=a,this.sambaDanceAnim.weight=0;let o=s.find(e=>"Jump"===e.name);if(void 0===o)throw Error("'Jumping' animation not found");this.jumpAnim=o,this.jumpAnim.weight=0;let r=s.find(e=>"Fall"===e.name);if(void 0===r)throw Error("'Falling' animation not found");this.fallingAnim=r,this.fallingAnim.weight=0;let l=s.find(e=>"Land"===e.name);if(void 0===l)throw Error("'Landing' animation not found");this.landingAnim=l,this.landingAnim.weight=0;let d=s.find(e=>"Idle"===e.name);if(void 0===d)throw Error("'Idle' animation not found");this.idleAnim=d,this.idleAnim.weight=1,this.idleAnim.play(!0),this.targetAnim=this.idleAnim,this.nonIdleAnimations=[this.walkAnim,this.sambaDanceAnim,this.jumpAnim,this.fallingAnim,this.landingAnim],this.physicsAggregate=new el.p(this.getTransform(),q.Bq.CAPSULE,{mass:1,friction:.5}),this.physicsAggregate.body.setMassProperties({inertia:R.P.ZeroReadOnly}),this.physicsAggregate.body.setAngularDamping(100),this.physicsAggregate.body.setLinearDamping(10)}}var ep=i(63913),em=((l={})[l.UNSUPPORTED=0]="UNSUPPORTED",l[l.SLIDING=1]="SLIDING",l[l.SUPPORTED=2]="SUPPORTED",l);class eg extends ec{update(e){this._startPosTemp.copyFrom(this.getTransform().position),this._velocityTemp.copyFrom(this.physicsAggregate.body.getLinearVelocity()),this._velocityTemp.scaleInPlace(e),this._startPosTemp.addToRef(this._velocityTemp,this._endPosTemp),this._castWithCollectors(this._startPosTemp,this._endPosTemp),this._updateManifold(),this.isGrounded=this.checkGrounded(),this.handleInput(),this.updateState(),this.updateMovement(),this.updateAnimations(e),this.updateCameraCollision()}handleInput(){let e=this.inputMap.get(this.keyJump)||!1;e&&!this.previousJumpKeyState&&this.isGrounded&&!this.isJumping&&(this.isJumping=!0,this.jumpAnim.reset(),this.jumpAnim.play(!1),this.physicsAggregate.body.applyImpulse(new R.P(0,7e3,0),new R.P(0,0,0))),this.previousJumpKeyState=e;let t=this.inputMap.get(this.keyInteract)||!1;t&&!this.previousInteractKeyState&&this.gameEngine.tryInteract(this),this.previousInteractKeyState=t}updateState(){let e=this.checkSupport(),t=this.physicsAggregate.body.getLinearVelocity().y;this.isFalling=t<-.1,this.isGrounded&&t<=0&&(this.isJumping=!1),this.inputMap.get(this.keyDance)?this.currentState=eh.DANCING:e===em.SUPPORTED?this.currentState=this.isAnyMovementKeyDown()?eh.WALKING:eh.IDLE:e===em.SLIDING?this.currentState=eh.FALLING:this.isFalling&&this.isLanding()?this.currentState=eh.LANDING:this.isFalling?this.currentState=eh.FALLING:this.isJumping?this.currentState=eh.JUMPING:this.currentState=eh.IDLE}updateMovement(){this._cameraForwardTemp.copyFrom(this.thirdPersonCamera.getForwardRay().direction),this._forwardTemp.set(this._cameraForwardTemp.x,0,this._cameraForwardTemp.z),this._forwardTemp.normalize(),this._rightTemp.set(this._forwardTemp.z,0,-this._forwardTemp.x),this._rightTemp.normalize(),this._moveDirectionTemp.setAll(0),this.inputMap.get(this.keyForward)&&this._moveDirectionTemp.addInPlace(this._forwardTemp),this.inputMap.get(this.keyBackward)&&this._moveDirectionTemp.subtractInPlace(this._forwardTemp),this.inputMap.get(this.keyLeft)&&this._moveDirectionTemp.subtractInPlace(this._rightTemp),this.inputMap.get(this.keyRight)&&this._moveDirectionTemp.addInPlace(this._rightTemp),this._moveDirectionTemp.normalize();let e=this.getTransform().rotationQuaternion;if(!e)throw Error("Character rotation quaternion is null");for(let t of(this._moveDirectionTemp.lengthSquared()>.01?R._f.FromLookDirectionLHToRef(this._moveDirectionTemp,R.P.UpReadOnly,this._desiredRotationTemp):this._desiredRotationTemp.copyFrom(e),this.applySmoothRotation(e,this._desiredRotationTemp),this._moveDirectionTemp.scaleToRef(this.moveSpeed,this._desiredVelocityTemp),this._adjustedVelocityTemp.copyFrom(this._desiredVelocityTemp),this.manifold)){let e=t.normal,i=this._adjustedVelocityTemp.dot(e);i<0&&(e.scaleToRef(i,this._projectionTemp),this._adjustedVelocityTemp.subtractInPlace(this._projectionTemp))}this._currentVelocityTemp.copyFrom(this.physicsAggregate.body.getLinearVelocity()),this._newVelocityTemp.set(this._adjustedVelocityTemp.x,this._currentVelocityTemp.y,this._adjustedVelocityTemp.z),this.physicsAggregate.body.setLinearVelocity(this._newVelocityTemp)}applySmoothRotation(e,t){if(t.equals(e))this._angularVelocityTemp.setAll(0),this.physicsAggregate.body.setAngularVelocity(this._angularVelocityTemp);else{R._f.InverseToRef(e,this._rotationDeltaTemp),this._rotationDeltaTemp.multiplyInPlace(t),this._rotationDeltaTemp.toEulerAnglesToRef(this._rotationDeltaEulerTemp);let i=this._rotationDeltaEulerTemp.y*this.rotationSpeed;this._angularVelocityTemp.set(0,i,0),this.physicsAggregate.body.setAngularVelocity(this._angularVelocityTemp)}}checkGroundWithShapeCast(e){let t=this.scene.getPhysicsEngine().getPhysicsPlugin(),i=t._hknp;this._groundCheckStartPos.copyFrom(this.getTransform().position),this._groundCheckEndPos.copyFrom(this._groundCheckStartPos),this._groundCheckEndPos.y-=e;let s=[this.physicsAggregate.shape._pluginData,[0,0,0,1],[this._groundCheckStartPos.x,this._groundCheckStartPos.y,this._groundCheckStartPos.z],[this._groundCheckEndPos.x,this._groundCheckEndPos.y,this._groundCheckEndPos.z],!1,[BigInt(0)]];if(i.HP_World_ShapeCastWithCollector(t.world,this._castCollector,s),i.HP_QueryCollector_GetNumHits(this._castCollector)[1]>0){let[e,,t]=i.HP_QueryCollector_GetShapeCastResult(this._castCollector,0)[1];if(e<1)return R.P.FromArrayToRef(t[4],0,this._groundNormalTemp),{isGrounded:!0,groundNormal:this._groundNormalTemp}}return{isGrounded:!1,groundNormal:null}}checkGrounded(){return this.checkGroundWithShapeCast(this.groundCheckDistance).isGrounded}isLanding(){return this.checkGround(.9)}checkGround(e){var t;this._raycastResult.reset(),this._groundCheckStartPos.copyFrom(this.getTransform().position);let i=this._vector3Tmp1;i.set(this._groundCheckStartPos.x,this._groundCheckStartPos.y-this.groundCheckOriginOffset,this._groundCheckStartPos.z);let s=this._vector3Tmp2;return R.P.DownReadOnly.scaleToRef(e,this._velocityTemp),i.addToRef(this._velocityTemp,s),(null===(t=this.scene.getPhysicsEngine())||void 0===t?void 0:t.getPhysicsPlugin()).raycast(i,s,this._raycastResult),!!this._raycastResult.hasHit&&(this.lastGroundedTime=performance.now(),!0)}_castWithCollectors(e,t){let i=this.scene.getPhysicsEngine().getPhysicsPlugin(),s=i._hknp,n=[e.x,e.y,e.z],a=[0,0,0,1],o=[this.physicsAggregate.shape._pluginData,n,a,this.keepDistance+this.keepContactTolerance,!1,[BigInt(0)]];s.HP_World_ShapeProximityWithCollector(i.world,this._startCollector,o);let r=[this.physicsAggregate.shape._pluginData,a,n,[t.x,t.y,t.z],!1,[BigInt(0)]];s.HP_World_ShapeCastWithCollector(i.world,this._castCollector,r)}_updateManifold(){let e=this.scene.getPhysicsEngine().getPhysicsPlugin(),t=e._hknp;this.manifold=[];let i=t.HP_QueryCollector_GetNumHits(this._startCollector)[1];for(let s=0;s<i;s++){let[i,,n]=t.HP_QueryCollector_GetShapeProximityResult(this._startCollector,s)[1],a=R.P.FromArray(n[3]),o=R.P.FromArray(n[4]),r=n[0][0],l=e._bodies.get(r);if(l){let e={position:a,normal:o,distance:i,fraction:0,bodyB:l.body,allowedPenetration:Math.min(Math.max(this.keepDistance-i,0),this.keepDistance)};this.manifold.push(e)}}}checkSupport(){let e=!1,t=R.P.Zero(),i=0;for(let s of this.manifold)s.normal.dot(R.P.Up())>.1&&(e=!0,t.addInPlace(s.normal),i++);return e?(t.scaleInPlace(1/i),t.dot(R.P.Up())>this.maxSlopeCosine?em.SUPPORTED:em.SLIDING):em.UNSUPPORTED}updateCameraCollision(){let e=this.thirdPersonCamera;this._cameraTargetTemp=this.cameraAttachPoint.getAbsolutePosition(),e.position.subtractToRef(this._cameraTargetTemp,this._cameraDirectionTemp);let t=this._cameraDirectionTemp.length();if(t<1e-4)return;this._cameraDirectionTemp.normalizeToRef(this._cameraDirectionTemp),this._cameraRay.origin.copyFrom(this._cameraTargetTemp),this._cameraRay.direction.copyFrom(this._cameraDirectionTemp),this._cameraRay.length=t;let i=this.scene.pickWithRay(this._cameraRay,e=>e.isPickable&&e!==this.getTransform()),s=Number.POSITIVE_INFINITY;i&&i.hit&&i.distance<t&&(s=Math.max(i.distance-.01,e.lowerRadiusLimit??1));let n=Math.min(e.radius,s);n=Math.max(n=Math.min(n,e.upperRadiusLimit??9999999),e.lowerRadiusLimit??1),e.radius=n}isAnyMovementKeyDown(){return!0===(this.inputMap.get(this.keyForward)||this.inputMap.get(this.keyBackward)||this.inputMap.get(this.keyLeft)||this.inputMap.get(this.keyRight))}constructor(e,t,i,s,n){super(t,n,i,s),(0,C._)(this,"inputMap",void 0),(0,C._)(this,"keyForward",er.KeyW),(0,C._)(this,"keyBackward",er.KeyS),(0,C._)(this,"keyLeft",er.KeyA),(0,C._)(this,"keyRight",er.KeyD),(0,C._)(this,"keyDance",er.KeyB),(0,C._)(this,"keyJump",er.Space),(0,C._)(this,"keyInteract",er.KeyE),(0,C._)(this,"isJumping",!1),(0,C._)(this,"isFalling",!1),(0,C._)(this,"previousJumpKeyState",!1),(0,C._)(this,"previousInteractKeyState",!1),(0,C._)(this,"cameraAttachPoint",void 0),(0,C._)(this,"gameEngine",void 0),(0,C._)(this,"thirdPersonCamera",void 0),(0,C._)(this,"isGrounded",!1),(0,C._)(this,"groundCheckDistance",.1),(0,C._)(this,"groundCheckOriginOffset",.1),(0,C._)(this,"lastGroundedTime",0),(0,C._)(this,"_raycastResult",void 0),(0,C._)(this,"_vector3Tmp1",new R.P),(0,C._)(this,"_vector3Tmp2",new R.P),(0,C._)(this,"_startCollector",void 0),(0,C._)(this,"_castCollector",void 0),(0,C._)(this,"keepDistance",.05),(0,C._)(this,"keepContactTolerance",.1),(0,C._)(this,"manifold",[]),(0,C._)(this,"maxSlopeCosine",Math.cos(60/180*Math.PI)),(0,C._)(this,"_startPosTemp",new R.P),(0,C._)(this,"_endPosTemp",new R.P),(0,C._)(this,"_velocityTemp",new R.P),(0,C._)(this,"_cameraForwardTemp",new R.P),(0,C._)(this,"_forwardTemp",new R.P),(0,C._)(this,"_rightTemp",new R.P),(0,C._)(this,"_moveDirectionTemp",new R.P),(0,C._)(this,"_desiredVelocityTemp",new R.P),(0,C._)(this,"_adjustedVelocityTemp",new R.P),(0,C._)(this,"_currentVelocityTemp",new R.P),(0,C._)(this,"_newVelocityTemp",new R.P),(0,C._)(this,"_projectionTemp",new R.P),(0,C._)(this,"_desiredRotationTemp",new R._f),(0,C._)(this,"_rotationDeltaTemp",new R._f),(0,C._)(this,"_rotationDeltaEulerTemp",new R.P),(0,C._)(this,"_angularVelocityTemp",new R.P),(0,C._)(this,"_groundCheckStartPos",new R.P),(0,C._)(this,"_groundCheckEndPos",new R.P),(0,C._)(this,"_groundNormalTemp",new R.P),(0,C._)(this,"_cameraTargetTemp",new R.P),(0,C._)(this,"_cameraDirectionTemp",new R.P),(0,C._)(this,"_cameraRay",new ea.zH(R.P.Zero(),R.P.Zero())),this.gameEngine=e,this.inputMap=new Map,n.actionManager=new ei.k(n),n.actionManager.registerAction(new es.fQ(ei.k.OnKeyDownTrigger,e=>{let t=e.sourceEvent.code;this.inputMap.set(t,!0)})),n.actionManager.registerAction(new es.fQ(ei.k.OnKeyUpTrigger,e=>{let t=e.sourceEvent.code;this.inputMap.set(t,!1)})),this.cameraAttachPoint=new eo.Y("cameraAttachPoint",n),this.cameraAttachPoint.parent=this.getTransform(),this.cameraAttachPoint.position=new R.P(0,.4,0);let a=new en.Yf("thirdPersonCamera",-Math.PI/2,Math.PI/3,5,this.cameraAttachPoint.getAbsolutePosition(),n);a.attachControl(n.getEngine().getRenderingCanvas(),!0),a.lowerRadiusLimit=1.5,a.upperRadiusLimit=10,a.lowerBetaLimit=.1,a.upperBetaLimit=Math.PI/2+.2,a.wheelPrecision=30,a.minZ=.02,a.maxZ=1e3,a.setTarget(this.cameraAttachPoint),this.thirdPersonCamera=a,this._raycastResult=new ep.d;let o=n.getPhysicsEngine().getPhysicsPlugin()._hknp;this._startCollector=o.HP_QueryCollector_Create(16)[1],this._castCollector=o.HP_QueryCollector_Create(16)[1]}}var eu=i(81823),ey=i(54043),ef=i(1200),ex=i(25998);class eb{static reset(){this.promptTextures.forEach(e=>{e.dispose()}),this.promptTextures.clear(),this.particleTextures.forEach(e=>{e.dispose()}),this.particleTextures.clear(),this.particleSystemPool.forEach(e=>{e.dispose()}),this.particleSystemPool=[]}static getParticleSystem(e,t,i){if(this.particleSystemPool.length>0){let t=this.particleSystemPool.pop();return t.name=e,t}return new ef.p(e,t,i)}static returnParticleSystemToPool(e){e.stop(),e.reset(),this.particleSystemPool.push(e)}createSparkleEffect(){this.sparkleSystem=eb.getParticleSystem(`${this.mesh.name}_sparkles`,15,this.scene),this.sparkleSystem.emitter=this.promptDisc;let e=new R.P(-.1,-.1,-.1),t=new R.P(.1,.1,.1);this.sparkleSystem.minEmitBox=e,this.sparkleSystem.maxEmitBox=t,this.sparkleSystem.color1=new L.HE(1,.85,.9,.6),this.sparkleSystem.color2=new L.HE(.85,.9,1,.6),this.sparkleSystem.colorDead=new L.HE(0,0,0,0),this.sparkleSystem.minSize=.02,this.sparkleSystem.maxSize=.06,this.sparkleSystem.minLifeTime=1,this.sparkleSystem.maxLifeTime=2,this.sparkleSystem.emitRate=5,this.sparkleSystem.blendMode=ef.p.BLENDMODE_ADD,this.sparkleSystem.gravity=new R.P(0,-.02,0);let i=new R.P(-.15,.3,-.15),s=new R.P(.15,.6,.15);this.sparkleSystem.direction1=i,this.sparkleSystem.direction2=s,this.sparkleSystem.minEmitPower=.03,this.sparkleSystem.maxEmitPower=.08,this.sparkleSystem.updateSpeed=.02,this.sparkleSystem.preWarmCycles=0,this.sparkleSystem.disposeOnStop=!1}setDisabled(e){this.disabled=e,e&&this.showPrompt(!1)}isDisabled(){return this.disabled}showPrompt(e){this.disabled&&(e=!1),this.promptDisc.setEnabled(e),this.sparkleSystem&&(e?this.sparkleSystem.start():this.sparkleSystem.stop())}activate(e,t){switch(this.interactType){case $.ServingOrder:t&&console.log("Serving order interaction");break;case $.Oven:let i,s,n="assets/particles/Star-Texture.png";eb.particleTextures.has(n)?i=eb.particleTextures.get(n):((i=new A.x(n,this.scene)).hasAlpha=!0,eb.particleTextures.set(n,i));let a=eb.getParticleSystem("fire",600,this.scene);a.particleTexture=i;let o=new R.P;o.copyFrom(this.mesh.getAbsolutePosition()),o.y+=1,a.emitter=o;let r=new R.P(-.35,0,-.35),l=new R.P(.35,.2,.35);a.minEmitBox=r,a.maxEmitBox=l,a.color1=new L.HE(.6,.4,.9,.8),a.color2=new L.HE(.4,.7,.9,.8),a.colorDead=new L.HE(.2,.1,.3,0),a.addColorGradient(0,new L.HE(.6,.4,.9,.6)),a.addColorGradient(.3,new L.HE(.7,.5,.9,.7)),a.addColorGradient(.6,new L.HE(.4,.7,.9,.5)),a.addColorGradient(1,new L.HE(.2,.5,.8,0)),a.minSize=.02,a.maxSize=.12,a.minLifeTime=.2,a.maxLifeTime=.6,a.addSizeGradient(0,.02),a.addSizeGradient(.2,.08),a.addSizeGradient(.4,.04),a.addSizeGradient(.6,.1),a.addSizeGradient(.8,.06),a.addSizeGradient(1,.01),a.emitRate=150,a.blendMode=ef.p.BLENDMODE_ADD,a.minInitialRotation=0,a.maxInitialRotation=2*Math.PI,a.gravity=new R.P(0,-2,0);let d=new R.P(-.3,2,-.3),h=new R.P(.3,3,.3);a.direction1=d,a.direction2=h,a.minAngularSpeed=-(1.5*Math.PI),a.maxAngularSpeed=1.5*Math.PI,a.minEmitPower=.05,a.maxEmitPower=.2,a.updateSpeed=.01,a.disposeOnStop=!1;let c="assets/particles/ExplosionTexture-Smoke-1.png";eb.particleTextures.has(c)?s=eb.particleTextures.get(c):((s=new A.x(c,this.scene)).hasAlpha=!0,eb.particleTextures.set(c,s));let p=eb.getParticleSystem("smoke",200,this.scene);p.particleTexture=s,p.emitter=o,p.minEmitBox=new R.P(-.4,.1,-.4),p.maxEmitBox=new R.P(.4,.3,.4),p.color1=new L.HE(.4,.4,.5,.2),p.color2=new L.HE(.2,.2,.3,.2),p.colorDead=new L.HE(.1,.1,.1,0),p.addColorGradient(0,new L.HE(.4,.4,.6,0)),p.addColorGradient(.1,new L.HE(.3,.3,.4,.2)),p.addColorGradient(.6,new L.HE(.2,.2,.25,.15)),p.addColorGradient(1,new L.HE(.1,.1,.1,0)),p.minSize=.3,p.maxSize=.7,p.minLifeTime=.5,p.maxLifeTime=1.2,p.addSizeGradient(0,.2),p.addSizeGradient(.3,.5),p.addSizeGradient(.7,.7),p.addSizeGradient(1,.9),p.emitRate=30,p.blendMode=ef.p.BLENDMODE_STANDARD,p.minInitialRotation=0,p.maxInitialRotation=2*Math.PI,p.minAngularSpeed=-.5,p.maxAngularSpeed=.5,p.gravity=new R.P(0,-1,0),p.direction1=new R.P(-.2,1,-.2),p.direction2=new R.P(.2,1.5,.2),p.minEmitPower=.1,p.maxEmitPower=.3,p.updateSpeed=.01,a.start(),p.start(),setTimeout(()=>{a.stop(),p.stop(),eb.returnParticleSystemToPool(a),eb.returnParticleSystemToPool(p)},5e3-(Date.now()-e));break;case $.Stock:t&&(this.ingredientType===J.Plate?(t.pickupPlate(),t.updatePlateMesh()):t.pickupIngredient(this.ingredientType));break;case $.Trash:t&&(t.holdedIngredient!==J.None?t.dropIngredient():t.isHoldingPlate&&t.dropPlate());break;default:console.warn("Unknown interact type:",this.interactType)}}deactivate(){console.log("Deactivating interactable object",this.id)}interact(e,t){this.disabled||this.activate(t,e)}updateIngredientsOnBoard(e){this.clearIngredientsOnBoard(),this.ingredientLoader&&e.forEach((e,t)=>{let i=this.ingredientLoader.getIngredientMesh(e);i.parent=this.mesh,i.position=new R.P(0,.1+.1*t,0),i.scaling=new R.P(.5,.5,.5),this.displayedIngredients.push(i)})}clearIngredientsOnBoard(){this.displayedIngredients.forEach(e=>{e.dispose()}),this.displayedIngredients=[]}constructor(e,t,i,s,n,a,o="E",r){let l;if((0,C._)(this,"mesh",void 0),(0,C._)(this,"interactionDistance",2.5),(0,C._)(this,"promptDisc",void 0),(0,C._)(this,"scene",void 0),(0,C._)(this,"billboardOffset",void 0),(0,C._)(this,"interactType",void 0),(0,C._)(this,"ingredientType",void 0),(0,C._)(this,"id",void 0),(0,C._)(this,"sparkleSystem",void 0),(0,C._)(this,"ingredientLoader",void 0),(0,C._)(this,"displayedIngredients",[]),(0,C._)(this,"_positionUpdateTemp",new R.P),(0,C._)(this,"disabled",!1),this.mesh=e,this.scene=t,this.billboardOffset=(null==a?void 0:a.clone())??new R.P(0,2,0),this.ingredientLoader=r,this.promptDisc=ey.VO7.CreateDisc(`${e.name}_prompt_disc`,{radius:.25,tessellation:16},t),this.promptDisc.billboardMode=ey.Kj0.BILLBOARDMODE_ALL,eb.promptTextures.has(o))l=eb.promptTextures.get(o);else{let e=(l=new ex.c(`prompt_texture_${o}`,{width:64,height:64},t)).getContext();e.clearRect(0,0,64,64),e.fillStyle="#FF9999",e.font='bold 32px "Patrick Hand"',e.textAlign="center",e.textBaseline="middle",e.fillText(o.toUpperCase(),32,32),l.update(),eb.promptTextures.set(o,l)}let d=new D.K("promptMat",t);d.diffuseTexture=l,d.emissiveColor=new L.Wo(1,.9,.95),d.diffuseColor=new L.Wo(1,.98,1),d.useAlphaFromDiffuseTexture=!0,d.alpha=.8,d.disableLighting=!0,this.promptDisc.material=d,this.promptDisc.setEnabled(!1),this.promptDisc.isPickable=!1,this.promptDisc.renderingGroupId=1,this.scene.onBeforeRenderObservable.add(()=>{this.promptDisc.isEnabled()&&(this._positionUpdateTemp.copyFrom(this.mesh.getAbsolutePosition()),this._positionUpdateTemp.addInPlace(this.billboardOffset),this._positionUpdateTemp.y+=.15*Math.sin(.0015*Date.now()),this.promptDisc.setAbsolutePosition(this._positionUpdateTemp))}),this.createSparkleEffect(),this.interactType=i,this.ingredientType=s,this.id=n}}(0,C._)(eb,"promptTextures",new Map),(0,C._)(eb,"particleTextures",new Map),(0,C._)(eb,"particleSystemPool",[]);class eP{loadAndPlaceModels(e,t,i,s,n){if(eb.reset(),this.interactables=[],n){let e=Y(t);e!==n?(console.error(`Map hash mismatch! Client: ${e}, Server: ${n}`),alert("Warning: Your game map version differs from the server. This may cause gameplay issues.")):console.log(`Map hash verified: ${e}`)}else console.warn("No map hash provided for verification, the client hash is:",Y(t),"this may cause gameplay issues.");t.forEach(t=>{let{fileName:i}=t;if(!this.loadedContainers[i]){let s=e+t.map+"/",n=this.assetsManager.addContainerTask(i,"",s,i);n.onSuccess=e=>{this.loadedContainers[i]=e.loadedContainer},n.onError=(e,t,s)=>{console.error(`Error loading ${i}:`,t,s)}}}),s&&"function"==typeof s&&(this.assetsManager.onProgress=(e,t)=>{s((t-e)/t*100)}),this.assetsManager.onFinish=()=>{t.forEach(e=>{let t=this.loadedContainers[e.fileName];if(!t){console.warn(`Could not find loaded container for "${e.fileName}". Skipping.`);return}let i=e.defaultPhysics;e.instances.forEach(s=>{let n=t.instantiateModelsToScene(e=>e).rootNodes[0];if(!n||!(n instanceof eu.Kj)){console.error(`Invalid root node for model "${e.fileName}"`);return}if(n.name=e.fileName.replace(".glb",""),e.defaultScaling&&n.scaling.set(e.defaultScaling.x??1,e.defaultScaling.y??1,e.defaultScaling.z??1),e.interaction??s.interaction){let t=e.interaction??s.interaction;if(!t||!t.id){console.warn(`Missing interaction for model "${e.fileName}"`);return}let i=e.billboardOffset?new R.P(e.billboardOffset.x,e.billboardOffset.y,e.billboardOffset.z):void 0,a=new eb(n,this.scene,t.interactType,t.ingredient??J.None,t.id,i,"E",this.ingredientLoader);a.interactionDistance=2,this.interactables.push(a)}s.rotation&&n.rotation.set(s.rotation.x??0,s.rotation.y??0,s.rotation.z??0),s.position&&n.position.set(s.position.x,s.position.y,s.position.z),s.scaling&&n.scaling.set(s.scaling.x??1,s.scaling.y??1,s.scaling.z??1),n.getChildMeshes().forEach(t=>{s.rotation&&(t.rotation.set(s.rotation.x??0,s.rotation.y??0,s.rotation.z??0),t.rotationQuaternion=null);let n=s.physics??i;if(n){if(!n.shapeType){console.warn(`Missing shape type for physics in model "${e.fileName}"`);return}new el.p(t,n.shapeType,{mass:n.mass??0,restitution:n.restitution??.2,friction:n.friction??.5},this.scene),t.receiveShadows=!0,"cloud1.glb"==e.fileName&&(t.material=this.cloudMaterial),this.cascadedShadowGenerator.addShadowCaster(t)}})})}),i()},this.assetsManager.load()}constructor(e,t,i){(0,C._)(this,"scene",void 0),(0,C._)(this,"cascadedShadowGenerator",void 0),(0,C._)(this,"assetsManager",void 0),(0,C._)(this,"loadedContainers",{}),(0,C._)(this,"cloudMaterial",void 0),(0,C._)(this,"interactables",[]),(0,C._)(this,"ingredientLoader",void 0),this.scene=e,this.assetsManager=new O.Sp(this.scene),this.assetsManager.autoHideLoadingUI=!1,this.assetsManager.useDefaultLoadingScreen=!1,this.cascadedShadowGenerator=t,this.ingredientLoader=i;let s=new D.K("cloud",this.scene);s.disableLighting=!1,s.emissiveColor=new L.Wo(.5,.5,.5),s.alpha=.85,s.backFaceCulling=!0,this.cloudMaterial=s}}class ev extends ec{receiveFirstState(e){this.targetPosition=new R.P(e.x,e.y,e.z),this.targetYRotation=e.rot,this.previousPosition.copyFrom(this.targetPosition),this.impostorMesh.setEnabled(!0),void 0!==e.holdingPlate&&(this.isHoldingPlate=e.holdingPlate),void 0!==e.holdedIngredient&&this.forceSetIngredient(e.holdedIngredient)}receiveState(e){if(!e.connected){this.impostorMesh.setEnabled(!1);return}this.impostorMesh.setEnabled(!0),this.previousPosition.copyFrom(this.targetPosition),this.targetPosition=new R.P(e.x,e.y,e.z),this.targetYRotation=e.rot;let t=performance.now(),i=(t-this.lastUpdateTime)/1e3;i>0&&(this.currentVelocity=this.targetPosition.subtract(this.previousPosition).scale(1/i)),this.lastUpdateTime=t,this.updateAnimationState(e.animationState),e.holdingPlate&&!this.isHoldingPlate?this.forcePickupPlate():!e.holdingPlate&&this.isHoldingPlate&&this.dropPlate(),this.forceSetIngredient(e.holdedIngredient)}update(e){this.updateMovement(e),this.updateAnimations(e)}dispose(){super.dispose()}lerpRotationY(e,t){Math.abs(this.impostorMesh.rotationQuaternion.toEulerAngles().y-e)>Math.PI?this.impostorMesh.rotationQuaternion=R._f.RotationAxis(R.P.Up(),e):this.impostorMesh.rotationQuaternion=R._f.Slerp(this.impostorMesh.rotationQuaternion,R._f.RotationAxis(R.P.Up(),e),t)}lerpPosition(e,t){this.impostorMesh.position=R.P.Lerp(this.impostorMesh.position,e,t)}updateMovement(e){this._predictedPositionTemp.copyFrom(this.targetPosition),this.currentVelocity.lengthSquared()>.01&&(this.currentVelocity.scaleToRef(e,this._predictedPositionTemp),this.targetPosition.addToRef(this._predictedPositionTemp,this._predictedPositionTemp)),this.lerpPosition(this._predictedPositionTemp,this.positionInterpolationFactor),this.lerpRotationY(this.targetYRotation,this.rotationInterpolationFactor)}updateAnimationState(e){switch(e){case"Walking":this.currentState=eh.WALKING;break;case"SambaDancing":this.currentState=eh.DANCING;break;case"Jump":this.currentState=eh.JUMPING;break;case"Fall":this.currentState=eh.FALLING;break;case"Landing":this.currentState=eh.LANDING;break;default:this.currentState=eh.IDLE}}constructor(e,t,i,s){super(e,t,i,s),(0,C._)(this,"scene",void 0),(0,C._)(this,"targetPosition",R.P.Zero()),(0,C._)(this,"targetYRotation",0),(0,C._)(this,"previousPosition",new R.P),(0,C._)(this,"currentVelocity",new R.P),(0,C._)(this,"lastUpdateTime",0),(0,C._)(this,"positionInterpolationFactor",.2),(0,C._)(this,"rotationInterpolationFactor",.2),(0,C._)(this,"_predictedPositionTemp",new R.P),this.scene=t,this.previousPosition.copyFrom(e.position),this.lastUpdateTime=performance.now(),this.physicsAggregate&&this.physicsAggregate.dispose()}}var ew=i(19107);i(34443),i(68313);class e_{async loadIngredients(){this.assetsManager.addMeshTask("load-Nori-model","","assets/map/japan/","Nori.glb").onSuccess=e=>{let t=e.loadedMeshes[0];t.isVisible=!1,t.getChildMeshes().forEach(e=>{e instanceof eu.Kj&&(e.isPickable=!1,e.isVisible=!1)}),this.ingredientMeshes.set(J.Nori,t)},this.assetsManager.addMeshTask("load-Rice-model","","assets/map/japan/","Rice Ball.glb").onSuccess=e=>{let t=e.loadedMeshes[0];t.isVisible=!1,t.getChildMeshes().forEach(e=>{e instanceof eu.Kj&&(e.isPickable=!1,e.isVisible=!1)}),this.ingredientMeshes.set(J.Rice,t)},this.assetsManager.addMeshTask("load-Onigiri-model","","assets/map/japan/","Onigiri.glb").onSuccess=e=>{let t=e.loadedMeshes[0];t.isVisible=!1,t.getChildMeshes().forEach(e=>{e instanceof eu.Kj&&(e.isPickable=!1,e.isVisible=!1)}),this.ingredientMeshes.set(J.Onigiri,t)},this.assetsManager.addMeshTask("load-Plate-model","","assets/map/japan/","Plate.glb").onSuccess=e=>{let t=e.loadedMeshes[0];t.isVisible=!1,t.getChildMeshes().forEach(e=>{e instanceof eu.Kj&&(e.isPickable=!1,e.isVisible=!1)}),this.ingredientMeshes.set(J.Plate,t)},this.assetsManager.load()}getIngredientMesh(e){let t=this.ingredientMeshes.get(e);if(!t)throw Error(`Mod\xe8le pour l’ingr\xe9dient ${e} non charg\xe9`);let i=t.clone(`ingredient_${e}`);return i.isVisible=!0,i.getChildMeshes().forEach(e=>{e.isPickable=!0,e.isVisible=!0}),i}constructor(e){(0,C._)(this,"assetsManager",void 0),(0,C._)(this,"ingredientMeshes",new Map),this.assetsManager=new O.Sp(e),this.assetsManager.useDefaultLoadingScreen=!1,this.assetsManager.autoHideLoadingUI=!1}}class eT{getCellKey(e){let t=Math.floor(e.x/this.cellSize),i=Math.floor(e.z/this.cellSize);return`${t},${i}`}addObject(e){let t=this.getCellKey(e.mesh.position);this.cells.has(t)||this.cells.set(t,[]),this.cells.get(t).push(e)}clear(){this.cells.clear()}rebuild(e){for(let t of(this.clear(),e))this.addObject(t)}getNearbyObjects(e,t){let i=[],s=Math.ceil(t/this.cellSize),[n,a]=this.getCellKey(e).split(",").map(Number);for(let o=n-s;o<=n+s;o++)for(let n=a-s;n<=a+s;n++){let s=`${o},${n}`,a=this.cells.get(s);if(a)for(let s of a)R.P.Distance(s.mesh.position,e)<=t&&i.push(s)}return i}constructor(e=5){(0,C._)(this,"cells",new Map),(0,C._)(this,"cellSize",void 0),this.cellSize=e}}class eS{handleVisibilityChange(){"visible"===document.visibilityState&&this.requestFocusAndPointerLock()}handleWindowFocus(){this.requestFocusAndPointerLock()}handleCanvasClick(){this.requestFocusAndPointerLock()}setupEventListeners(){let e=this.scene.getEngine().getRenderingCanvas();e&&(document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("focus",this.windowFocusHandler),e.addEventListener("click",this.canvasClickHandler))}requestFocusAndPointerLock(){let e=this.scene.getEngine().getRenderingCanvas();e&&(e.focus(),setTimeout(()=>{"visible"===document.visibilityState&&document.hasFocus()&&e.requestPointerLock().catch(e=>{console.warn("Failed to acquire pointer lock:",e)})},100))}dispose(){let e=this.scene.getEngine().getRenderingCanvas();e&&(document.removeEventListener("visibilitychange",this.visibilityChangeHandler),window.removeEventListener("focus",this.windowFocusHandler),e.removeEventListener("click",this.canvasClickHandler))}constructor(e){(0,C._)(this,"scene",void 0),(0,C._)(this,"visibilityChangeHandler",void 0),(0,C._)(this,"windowFocusHandler",void 0),(0,C._)(this,"canvasClickHandler",void 0),this.scene=e,this.visibilityChangeHandler=this.handleVisibilityChange.bind(this),this.windowFocusHandler=this.handleWindowFocus.bind(this),this.canvasClickHandler=this.handleCanvasClick.bind(this),this.setupEventListeners()}}var eM=i(94396),eI=i(87462);class eC{initializeFpsCounter(){let e=ew.i.CreateFullscreenUI("PerformanceUI");this.fpsText=new eM.a,this.fpsText.text="FPS: 0",this.fpsText.color="white",this.fpsText.fontSize=16,this.fpsText.textHorizontalAlignment=eI.o.HORIZONTAL_ALIGNMENT_RIGHT,this.fpsText.textVerticalAlignment=eI.o.VERTICAL_ALIGNMENT_BOTTOM,this.fpsText.paddingRight="10px",this.fpsText.paddingTop="10px",e.addControl(this.fpsText)}update(){let e=Date.now();if(e-this.lastPerformanceUpdate>this.PERFORMANCE_UPDATE_INTERVAL){let t=this.scene.getEngine(),i=t.getFps().toFixed();this.fpsText&&(this.fpsText.text=`FPS: ${i}`),this.lastPerformanceUpdate=e,30>Number(i)?t.setHardwareScalingLevel(1.1*t.getHardwareScalingLevel()):Number(i)>60&&t.getHardwareScalingLevel()>1&&t.setHardwareScalingLevel(Math.max(1,.9*t.getHardwareScalingLevel()))}}adjustShadowQuality(){this.shadowGenerator&&(this.shadowGenerator.blurKernel=16,this.shadowGenerator.useKernelBlur=!0,this.shadowGenerator.usePercentageCloserFiltering=!0,this.shadowGenerator.shadowMaxZ=20,this.shadowGenerator.stabilizeCascades=!0,this.shadowGenerator.lambda=.8,this.shadowGenerator.cascadeBlendPercentage=.1,this.shadowGenerator.depthClamp=!0,this.shadowGenerator.autoCalcDepthBounds=!0,this.shadowGenerator.bias=.001,this.shadowGenerator.normalBias=.3,this.shadowGenerator.depthScale=50)}dispose(){}constructor(e,t){(0,C._)(this,"scene",void 0),(0,C._)(this,"shadowGenerator",void 0),(0,C._)(this,"fpsText",void 0),(0,C._)(this,"lastPerformanceUpdate",0),(0,C._)(this,"PERFORMANCE_UPDATE_INTERVAL",1e3),this.scene=e,this.shadowGenerator=t,this.initializeFpsCounter(),this.adjustShadowQuality()}}class ez{dispose(){this.scene.dispose()}async init(){var e;let t=this.scene.getEngine();t.displayLoadingUI(),this.assetsManager=new O.Sp(this.scene),this.assetsManager.useDefaultLoadingScreen=!1,this.assetsManager.autoHideLoadingUI=!1,this.ingredientLoader=new e_(this.scene);let i=this.assetsManager.addContainerTask("characterTask","","assets/characters/","character.glb"),s=new F.a(!0,await (0,G.Z)());this.scene.enablePhysics(new R.P(0,-20,0),s),new N.e("hemilight",new R.P(0,1,0),this.scene).intensity=.3;let n=new k.O("sun",new R.P(-5,-10,5).normalize(),this.scene);n.position=n.direction.negate().scaleInPlace(40),this.shadowGenerator=new z.R(256,n),this.shadowGenerator.useKernelBlur=!0,this.shadowGenerator.depthClamp=!0,this.shadowGenerator.autoCalcDepthBounds=!0,this.performanceManager=new eC(this.scene,this.shadowGenerator),new N.e("extraHemi",R.P.Up(),this.scene).intensity=.4;let a=j.V.CreateBox("skyBox",{size:150},this.scene),o=new D.K("skyBox",this.scene);o.backFaceCulling=!1,o.reflectionTexture=new E.B("assets/skybox/skybox",this.scene),o.reflectionTexture.coordinatesMode=A.x.SKYBOX_MODE,o.diffuseColor=new L.Wo(0,0,0),o.specularColor=new L.Wo(0,0,0),a.material=o;let r=new B.x("ref",512,this.scene);null===(e=r.renderList)||void 0===e||e.push(a),this.scene.environmentTexture=r.cubeTexture,i.onSuccess=e=>{this.loadedCharacterContainer=e.loadedContainer},this.assetsManager.onProgress=(e,t,i)=>{let s=this.scene.getEngine();s.loadingScreen instanceof V&&s.loadingScreen.updateProgress((t-e)/t*100)},this.assetsManager.onFinish=()=>{ew.i.CreateFullscreenUI("UI"),this.loadingState.assets.progress=100,this.loadingState.currentTask="Assets loaded, preparing map...";let e=this.scene.getEngine();e.loadingScreen instanceof V&&(e.loadingScreen.loadingUIText=this.loadingState.currentTask),d=!0,c()};let l=new eP(this.scene,this.shadowGenerator,this.ingredientLoader),d=!1,h=!1,c=()=>{if(d&&h){let e=this.scene.getEngine();e.loadingScreen instanceof V&&(this.loadingState.currentTask="Initializing game...",e.loadingScreen.loadingUIText=this.loadingState.currentTask,e.loadingScreen.updateProgress(100),this.initializePlayers(),setTimeout(()=>{this.loadingState.currentTask="Ready!",e.loadingScreen instanceof V&&(e.loadingScreen.loadingUIText=this.loadingState.currentTask,e.loadingScreen.updateProgress(100)),setTimeout(()=>e.hideLoadingUI(),500)},500))}};this.assetsManager.load(),this.ingredientLoader.loadIngredients(),l.loadAndPlaceModels("assets/map/",et,()=>{if(this.interactables=l.interactables,h=!0,this.loadingState.map.loaded=!0,this.loadingState.map.progress=100,this.loadingState.currentTask="Map loading complete",t.loadingScreen instanceof V){let e=(this.loadingState.assets.progress+this.loadingState.map.progress)/2;t.loadingScreen.updateProgress(e),t.loadingScreen.loadingUIText=this.loadingState.currentTask}c();let e=(0,p.getStateCallbacks)(this.room);e(this.room.state).interactableObjects.onAdd(t=>{e(t).onChange(()=>{let e=this.interactables.find(e=>e.id===Number(t.id));if(e&&(e.setDisabled(t.disabled),t.isActive?e.activate(t.activeSince):e.deactivate(),e.interactType===$.ChoppingBoard)){let i=t.ingredientsOnBoard.map(e=>e);e.updateIngredientsOnBoard(i)}});let i=this.interactables.find(e=>e.id===Number(t.id));if(i&&(i.setDisabled(t.disabled),t.isActive?i.activate(t.activeSince):i.deactivate(),i.interactType===$.ChoppingBoard)){let e=t.ingredientsOnBoard.map(e=>e);i.updateIngredientsOnBoard(e)}})},e=>{this.loadingState.map.progress=e,this.loadingState.currentTask=`Loading map: ${e.toFixed(0)}%`;let t=this.scene.getEngine();if(t.loadingScreen instanceof V){let e=(this.loadingState.assets.progress+this.loadingState.map.progress)/2;t.loadingScreen.updateProgress(e),t.loadingScreen.loadingUIText=this.loadingState.currentTask}},this.room.state.mapHash),this.inputManager.requestFocusAndPointerLock()}update(e){var t,i,s;let n=e/1e3;if(null===(t=this.localController)||void 0===t||t.update(n),this.localController){this._playerPosTemp.copyFrom(this.localController.position),this.scene.getFrameId()%60==0&&this.spatialGrid.rebuild(this.interactables);let e=this.MAX_INTERACTION_DISTANCE/2,t=this.spatialGrid.getNearbyObjects(this._playerPosTemp,e),i=null,s=1/0;for(let e of t){let t=R.P.Distance(e.mesh.position,this._playerPosTemp);t<e.interactionDistance&&t<s&&(s=t,i=e)}i!==this._nearestInteractable&&(this._nearestInteractable&&this._nearestInteractable.showPrompt(!1),i&&i.showPrompt(!0),this._nearestInteractable=i)}if(this.room&&this.localController){let e=Date.now(),t=this.localController.getTransform(),i=t.position,n=(null===(s=t.rotationQuaternion)||void 0===s?void 0:s.toEulerAngles().y)||0,a=this.localController.getTargetAnim.name,o=e-this.lastNetworkUpdateTime,r=R.P.Distance(i,this.lastSentPosition)>this.POSITION_THRESHOLD,l=Math.abs(n-this.lastSentRotation)>this.ROTATION_THRESHOLD,d=this.lastSentAnimationState!==a;(o>=this.MAX_NETWORK_UPDATE_INTERVAL||o>=this.NETWORK_UPDATE_INTERVAL&&(r||l||d))&&(this.room.send("move",{position:{x:i.x,y:i.y,z:i.z},rotation:{y:n},animationState:a,timestamp:e}),this.lastSentPosition.copyFrom(i),this.lastSentRotation=n,this.lastSentAnimationState=a,this.lastNetworkUpdateTime=e)}this.remoteControllers.forEach(e=>{e.update(n)}),null===(i=this.performanceManager)||void 0===i||i.update()}tryInteract(e){if(this._nearestInteractable&&R.P.Distance(this._nearestInteractable.mesh.position,e.position)<=this._nearestInteractable.interactionDistance){this._nearestInteractable.interact(e,Date.now()),this.room.send("interact",{objectId:this._nearestInteractable.id,timestamp:Date.now()});return}this._playerPosTemp.copyFrom(e.position);let t=this.spatialGrid.getNearbyObjects(this._playerPosTemp,this.MAX_INTERACTION_DISTANCE),i=null,s=1/0;for(let e of t){let t=R.P.Distance(e.mesh.position,this._playerPosTemp);t<e.interactionDistance&&t<s&&(s=t,i=e)}i&&(this._nearestInteractable=i,i.interact(e,Date.now()),this.room.send("interact",{objectId:i.id,timestamp:Date.now()}))}initializePlayers(){if(!this.loadedCharacterContainer){console.error("Character container not loaded!");return}let e=this.loadedCharacterContainer.instantiateModelsToScene(e=>e),t=e.rootNodes[0];t.scaling=new R.P(1.3,1.3,1.3),t.rotation=new R.P(0,0,0),this.localController=new eg(this,t,this.ingredientLoader,e.animationGroups,this.scene),this.localController.model.receiveShadows=!0,this.shadowGenerator.addShadowCaster(this.localController.model);let i=(0,p.getStateCallbacks)(this.room);i(this.room.state).players.onAdd(async(e,t)=>{if(t===this.room.sessionId){var s,n;null===(s=this.localController)||void 0===s||s.setPosition(new R.P(e.x,e.y,e.z)),null===(n=this.localController)||void 0===n||n.setRotationY(e.rot),i(e).listen("holdingPlate",e=>{this.localController&&(e&&!this.localController.isHoldingPlate?this.localController.forcePickupPlate():!e&&this.localController.isHoldingPlate&&this.localController.dropPlate())}),i(e).listen("holdedIngredient",e=>{this.localController&&this.localController.forceSetIngredient(e)});return}let a=this.loadedCharacterContainer.instantiateModelsToScene(e=>e),o=a.rootNodes[0];o.scaling=new R.P(1.3,1.3,1.3),o.rotation=new R.P(0,0,0);let r=new ev(o,this.scene,this.ingredientLoader,a.animationGroups);r.setPosition(new R.P(e.x,e.y,e.z)),r.setRotationY(e.rot),o.receiveShadows=!0,this.shadowGenerator.addShadowCaster(o),this.remoteControllers.set(t,r),r.receiveFirstState(e);let l=0;i(e).onChange(()=>{let t=Date.now();t-l>50&&(r.receiveState(e),l=t)})}),i(this.room.state).players.onRemove((e,t)=>{let i=this.remoteControllers.get(t);i&&(i.dispose(),this.remoteControllers.delete(t))})}constructor(e,t){var i;(0,C._)(this,"interactables",[]),(0,C._)(this,"spatialGrid",new eT(2.5)),(0,C._)(this,"scene",void 0),(0,C._)(this,"room",void 0),(0,C._)(this,"localController",void 0),(0,C._)(this,"remoteControllers",new Map),(0,C._)(this,"shadowGenerator",void 0),(0,C._)(this,"assetsManager",void 0),(0,C._)(this,"ingredientLoader",void 0),(0,C._)(this,"inputManager",void 0),(0,C._)(this,"performanceManager",void 0),(0,C._)(this,"loadedCharacterContainer",void 0),(0,C._)(this,"_playerPosTemp",new R.P),(0,C._)(this,"loadingState",{assets:{progress:0,total:0,current:0},map:{progress:0,loaded:!1},currentTask:""}),(0,C._)(this,"lastNetworkUpdateTime",0),(0,C._)(this,"NETWORK_UPDATE_INTERVAL",10),(0,C._)(this,"MAX_NETWORK_UPDATE_INTERVAL",100),(0,C._)(this,"POSITION_THRESHOLD",.01),(0,C._)(this,"ROTATION_THRESHOLD",.05),(0,C._)(this,"lastSentPosition",new R.P),(0,C._)(this,"lastSentRotation",0),(0,C._)(this,"lastSentAnimationState",""),(0,C._)(this,"MAX_INTERACTION_DISTANCE",5),(0,C._)(this,"_nearestInteractable",null),this.scene=e,this.room=t,e.getEngine().setHardwareScalingLevel(1),this.inputManager=new eS(e),e.skipFrustumClipping=!1,e.skipPointerMovePicking=!0,e.shadowsEnabled=!0,e.lightsEnabled=!0,e.particlesEnabled=!0,e.collisionsEnabled=!0,e.fogEnabled=!0,null===(i=e.getPhysicsEngine())||void 0===i||i.setTimeStep(1/60)}}let ek=[{id:"onigiri",name:"Onigiri",steps:[{instruction:"Take rice from the stock and place it on a chopping board.",ingredients:[{ingredient:J.Rice,quantity:1}],machine:$.ChoppingBoard},{instruction:"Take nori from the stock and place it on the same chopping board (order doesn't matter).",ingredients:[{ingredient:J.Nori,quantity:1}],machine:$.ChoppingBoard},{instruction:"Once both rice and nori are on the chopping board, they will automatically combine into an Onigiri."}]}];var eN=i(40792),eE=i(50371);let eA=e=>{let t=[];return e.steps.forEach((e,i)=>{e.ingredients&&e.ingredients.forEach((s,n)=>{let{ingredient:a,quantity:o}=s,r=`/ingredients/${J[a].toLowerCase()}.png`;for(let s=0;s<o;s++)t.push({iconUrl:r,step:e.machine===$.ChoppingBoard?1:2*(e.machine===$.Oven),keySuffix:`${i}-${n}-${s}`})})}),t},eD=e=>{let{order:t}=e,i=ek.find(e=>e.id===t.recipeId),s=i?eA(i):[];return i?(0,d.jsxs)("div",{className:"bg-gradient-to-br from-purple-300 via-pink-200 to-yellow-100 rounded-lg shadow-md px-2.5 py-2 w-full flex items-center gap-3 transition-all duration-300",children:[(0,d.jsx)("div",{className:"flex-shrink-0",children:(0,d.jsx)("div",{className:"w-11 h-11 bg-white rounded-md overflow-hidden flex items-center justify-center shadow",children:(0,d.jsx)("img",{src:`/icons/${i.name.toLowerCase()}.png`,alt:i.name,className:"object-contain w-9 h-9",onError:e=>e.currentTarget.src="/icons/placeholder.png"})})}),(0,d.jsx)("div",{className:"flex-grow flex flex-col gap-1 min-w-0",children:s.length>0?(0,d.jsx)("div",{className:"flex flex-wrap gap-2 items-center",children:s.map(e=>(0,d.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,d.jsx)("img",{src:e.iconUrl,alt:1===e.step?"Chopping":2===e.step?"Cooking":"Ingredient",className:"w-9 h-9 object-contain bg-white/50 rounded-sm p-0.5",onError:e=>e.currentTarget.style.display="none"}),2===e.step&&(0,d.jsx)(eN.Z,{className:"w-4 h-4 absolute -bottom-1 -right-1 drop-shadow animate-pulse text-orange-500",strokeWidth:2.5,fill:"currentColor"}),1===e.step&&(0,d.jsx)(eE.Z,{className:"w-4 h-4 absolute -bottom-1 -right-1 drop-shadow animate-pulse text-green-500",strokeWidth:2.5,fill:"currentColor"})]},`ingredient-${e.keySuffix}-${e.iconUrl}`))}):(0,d.jsx)("div",{className:"text-xs text-gray-600 italic",children:"No ingredients required?"})})]}):(0,d.jsxs)("div",{className:"bg-red-200 rounded-lg shadow-md p-2 w-full text-red-800 text-xs",children:["Error: Recipe not found for order ",t.id]})};function eL(){let e=P(e=>e.orders);return(0,d.jsxs)("div",{className:"fixed top-2 right-2 z-10 w-64 max-h-[60vh] overflow-y-auto p-2 bg-opacity-60 backdrop-blur-sm rounded-lg shadow-lg space-y-2",children:[null==e?void 0:e.map(e=>(0,d.jsx)(eD,{order:e},e.id)),(!e||0===e.length)&&(0,d.jsx)("p",{className:"text-center text-gray-300 text-xs italic py-4",children:"No pending orders"})]})}var eR=i(74927);function ej(){let e=P(e=>e.score)??0;return(0,d.jsx)("div",{className:"border border-gradient-to-br from-purple-300 via-pink-200 to-yellow-100 rounded-full shadow-lg px-3 py-1 w-fit absolute bottom-3 left-12 transform -translate-x-1/2 z-10 pointer-events-none transition-colors duration-300 ease-in-out bg-gray-800",children:(0,d.jsxs)("div",{className:"flex items-center justify-center",children:[(0,d.jsx)(eR.Z,{strokeWidth:3,className:"inline-block h-5 w-5 mr-2 transition-colors duration-300 ease-in-out text-gradient-to-br from-purple-300 via-pink-200 to-yellow-100"}),(0,d.jsx)("span",{className:"text-2xl font-bold transition-colors duration-300 ease-in-out text-gradient-to-br from-purple-300 via-pink-200 to-yellow-100",children:e})]})})}var eO=i(45077);function eF(){let e=P(e=>e.timeLeft)??0,t=e<=1e4,i=Math.max(0,Math.floor(e/6e4)),s=Math.max(0,Math.floor(e%6e4/1e3)),n=`${String(i).padStart(2,"0")}:${String(s).padStart(2,"0")}`;return(0,d.jsx)("div",{className:`rounded-full shadow-lg px-4 py-1 w-fit absolute top-4 left-1/2 transform -translate-x-1/2 z-10 pointer-events-none transition-colors duration-300 ease-in-out ${t?"bg-gradient-to-br from-red-400 via-orange-300 to-yellow-200":"bg-gradient-to-br from-purple-300 via-pink-200 to-yellow-100"} ${t?"animate-pulse":""}`,children:(0,d.jsxs)("div",{className:"flex items-center justify-center",children:[(0,d.jsx)(eO.Z,{strokeWidth:4,className:`inline-block h-5 w-5 mr-2 transition-colors duration-300 ease-in-out ${t?"text-red-700":"text-gray-800"}`}),(0,d.jsx)("span",{className:`text-2xl font-md transition-colors duration-300 ease-in-out ${t?"text-red-700 font-extrabold":"text-gray-800"}`,children:n})]})})}var eB=i(53219);function eG(e){let{onBackToMenu:t}=e;return(0,d.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:[(0,d.jsxs)("button",{onClick:t,className:"absolute top-3 left-3 btn-dream-small pointer-events-auto flex items-center gap-2",children:[(0,d.jsx)(eB.Z,{className:"h-6 w-5",strokeWidth:4}),"Main menu"]}),(0,d.jsx)(eF,{}),(0,d.jsx)(eL,{}),(0,d.jsx)(ej,{})]})}let eK=e=>{let{onBackToMenu:t,gameEngineRef:i}=e,s=v(),n=w();return((0,h.useEffect)(()=>{if(s===g.ERROR){var e;console.error("Connection error:",null==n?void 0:n.message),null===(e=i.current)||void 0===e||e.dispose(),t()}else s===g.RECONNECTING&&console.log("Attempting to reconnect to game server...")},[s,n]),s===g.RECONNECTING)?(0,d.jsx)("div",{className:"absolute top-4 right-4 bg-warning text-white px-4 py-2 rounded-md shadow-lg",children:"Reconnecting to server..."}):null},eU=e=>{let{onBackToMenu:t}=e,i=b(),s=(0,h.useRef)(void 0),[n,a]=(0,h.useState)(!1),o=(0,h.useCallback)(async e=>{i&&(s.current=new ez(e,i),e.getEngine().onEndFrameObservable.add(()=>{a(!0)}),await s.current.init())},[i]),r=(0,h.useCallback)(e=>{var t;let i=e.getEngine().getDeltaTime();null===(t=s.current)||void 0===t||t.update(i)},[]);return(0,d.jsxs)("div",{className:"relative w-full h-full",children:[(0,d.jsx)(W,{antialias:!0,onSceneReady:o,onRender:r,id:"my-canvas",className:"w-full h-full"}),(0,d.jsx)(eK,{onBackToMenu:t,gameEngineRef:s}),n&&(0,d.jsx)(eG,{onBackToMenu:t})]})},eH=(0,i(777).U)(e=>({mode:"menu",roomToJoin:void 0,setMode:t=>e({mode:t}),setRoomToJoin:t=>e({roomToJoin:t})}));i(71941);let eV=()=>{let e=S(),t=eH(e=>e.setMode),i=eH(e=>e.setRoomToJoin);return(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1 bg-base-200 bg-opacity-90 p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between w-full max-w-md mb-4",children:[(0,d.jsx)("button",{className:"btn-dream-small",onClick:()=>{t("menu")},children:"Back to menu"}),(0,d.jsx)("button",{className:"btn-dream-small",onClick:()=>{i({roomName:"game",forceCreate:!0}),t("game")},children:"Create Room"})]}),(0,d.jsxs)("div",{className:"w-full max-w-md",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-br from-purple-300 via-pink-200 to-yellow-100 bg-clip-text text-transparent",children:"Available Rooms"}),e.length>0?(0,d.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,d.jsxs)("li",{className:"flex justify-between items-center p-4 bg-base-100 rounded-lg shadow",children:[(0,d.jsxs)("span",{className:"text-lg",children:[e.name," ",e.roomId]}),(0,d.jsxs)("span",{className:"text-sm text-gray-500",children:[e.clients," / ",e.maxClients]}),(0,d.jsx)("button",{className:"btn-dream-small","aria-label":`Join room ${e.name}`,onClick:()=>{i({roomId:e.roomId}),t("game")},disabled:e.clients>=e.maxClients,children:"Join"})]},e.roomId))}):(0,d.jsx)("p",{children:"No rooms available. Create a new room to start."})]})]})};(0,c.createRoot)(document.getElementById("root")).render((0,d.jsx)(h.StrictMode,{children:(0,d.jsx)(()=>{let e=eH(e=>e.mode),t=eH(e=>e.setMode),i=eH(e=>e.roomToJoin),s=eH(e=>e.setRoomToJoin);return(0,h.useEffect)(()=>"game"===e?((async()=>{await f({roomName:null==i?void 0:i.roomName,roomId:null==i?void 0:i.roomId,forceCreate:null==i?void 0:i.forceCreate})})(),()=>{x().catch(console.error)}):"roomList"===e?((async()=>{await _({roomName:"lobby",isLobby:!0})})(),()=>{T().catch(console.error)}):void 0,[e,i]),(0,d.jsxs)("div",{className:"min-h-screen h-screen flex flex-col bg-base-200 overflow-hidden",children:["menu"===e&&(0,d.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1",children:[(0,d.jsx)("h1",{className:"text-6xl font-bold mb-2 bg-gradient-to-br from-purple-300 via-pink-200 to-yellow-100 bg-clip-text text-transparent",children:"Delixia"}),(0,d.jsx)("p",{className:"text-xl mb-8 text-base-content opacity-80",children:"A cooking game with a twist!"}),(0,d.jsxs)("div",{className:"flex flex-col gap-4 w-64",children:[(0,d.jsx)("button",{onClick:()=>{s({roomName:"game"}),t("game")},className:"btn-dream",children:"Quick Play"}),(0,d.jsx)("button",{onClick:()=>{t("roomList")},className:"btn-dream",children:"Join Room"}),(0,d.jsx)("button",{onClick:()=>window.open("https://github.com/TriForMine/delixia","_blank"),className:"btn-dream",children:"GitHub"})]}),(0,d.jsxs)("div",{className:"fixed bottom-4 text-sm opacity-70 text-white",children:["Version ","b1947593b70dc2a371dae4e82c03a79c7b90004c"]})]}),"game"===e&&(0,d.jsx)("div",{className:"flex flex-1 h-full",children:(0,d.jsx)("div",{className:"flex-1 bg-base-100",children:(0,d.jsx)(eU,{onBackToMenu:()=>{t("menu")}})})}),"roomList"===e&&(0,d.jsx)(eV,{})]})},{})}))},19505:function(){},1078:function(){}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,i),a.exports}i.m=e,i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,s)=>(i.f[s](e,t),t),[])),i.u=e=>"static/js/async/"+e+"."+({1020:"f591bc4b",1164:"d8dd3e54",1250:"5cf01687",1310:"ee2620ae",1452:"c942ec9f",1605:"8404eaee",1716:"17e2a40d",1929:"6f1e5866",1938:"8869d148",1967:"2cec8321",2062:"017235c1",2149:"0d98e5c5",2150:"eb19cfcb",2161:"754ceeec",2197:"847a1cff",2235:"1600c166",2261:"55d05da5",2296:"d3b517db",231:"8076d0dc",2318:"edd2c677",2335:"b4ed154e",2479:"0b959ebb",2539:"6ca2083b",26:"d0fd7420",2659:"8cd7be67",2665:"7b9acac8",2698:"722506b6",2768:"75d2dd67",2779:"cdbedb75",296:"3d304153",2974:"e011f47a",3035:"51d0563f",3071:"c7532bc0",3190:"750946b5",3292:"502c62c7",3321:"7dd09af2",3366:"f276e61d",3415:"a1beb95a",3503:"869e87b0",3551:"9541ceff",3659:"6d0ab245",3663:"62bf0500",3667:"28ba6f2d",3765:"17e45337",3819:"e82f49c8",3904:"cdadf18e",4121:"f0ff86a1",4372:"82e350b9",446:"9b225d65",457:"8c6abd3b",459:"26687581",4664:"60d9e4bf",4846:"3edc203e",4849:"cb3279f3",4933:"be82e548",5021:"09c3e125",5101:"d144cd1a",5105:"8620fa32",5175:"0548bb21",5217:"fdbe64fc",5228:"65fdd392",5398:"9c88875c",54:"903d0b46",5578:"52c65856",5705:"75f631c4",5714:"69f9153c",5716:"5eee1ac4",5770:"676263cf",6065:"5aaad8f4",6076:"85bde6f2",6157:"28fc0ecf",6192:"89b21cb9",62:"9f8965e7",6253:"8a437dbe",6271:"795e19f0",6286:"0c62f6a4",6485:"061de022",65:"0817235c",662:"fad73edb",670:"82339a5d",6840:"5ce960f8",7021:"91cd6ff2",703:"ed8cf84b",705:"13446b16",7146:"cd16e2ec",7232:"8a00bd22",7332:"3b7f2622",7514:"0f6c0d59",7535:"7b033251",759:"1f3577a2",7611:"092d728a",7615:"5b4688bc",7619:"da6ab2e9",7784:"10f00951",7805:"eb54e91c",7820:"6174af94",7834:"1874838c",7862:"9c9d1afe",7959:"4b4bb352",8019:"32c27d90",8024:"eb5c697a",804:"0ec860eb",8118:"b8a4afc3",8211:"321e84cd",827:"0a259708",8277:"153d272c",8330:"6a0f925b",8375:"afd11a77",8388:"f198e42f",8420:"00877c9e",8531:"f7d49db8",8597:"998a6ddd",8608:"d1ebba28",8616:"6c54ffb9",8666:"1bcc3a51",8726:"992f3948",8847:"e6af35d4",8893:"57afcc62",8993:"58bc99ec",9071:"47583617",9117:"e27d7a04",9145:"4edb2ca9",9227:"03685d37",9352:"e89fa28f",9577:"e17eb483",9608:"47cd3f59",9950:"7ee45904"})[e]+".js",i.miniCssF=e=>""+e+".css",i.h=()=>"7e8af902f4ed7015",i.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="delixia:";i.l=function(s,n,a,o){if(e[s]){e[s].push(n);return}if(void 0!==a)for(var r,l,d=document.getElementsByTagName("script"),h=0;h<d.length;h++){var c=d[h];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==t+a){r=c;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,i.nc&&r.setAttribute("nonce",i.nc),r.setAttribute("data-webpack",t+a),r.src=s),e[s]=[n];var p=function(t,i){r.onerror=r.onload=null,clearTimeout(m);var n=e[s];if(delete e[s],r.parentNode&&r.parentNode.removeChild(r),n&&n.forEach(function(e){return e(i)}),t)return t(i)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),l&&document.head.appendChild(r)}})(),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];i.O=(t,s,n,a)=>{if(s){a=a||0;for(var o=e.length;o>0&&e[o-1][2]>a;o--)e[o]=e[o-1];e[o]=[s,n,a];return}for(var r=1/0,o=0;o<e.length;o++){for(var[s,n,a]=e[o],l=!0,d=0;d<s.length;d++)(!1&a||r>=a)&&Object.keys(i.O).every(e=>i.O[e](s[d]))?s.splice(d--,1):(l=!1,a<r&&(r=a));if(l){e.splice(o--,1);var h=n();void 0!==h&&(t=h)}}return t}})(),i.p="/Delixia/",i.rv=()=>"1.3.0",(()=>{i.b=document.baseURI||self.location.href;var e={2980:0};i.f.j=function(t,s){var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var a=new Promise((i,s)=>n=e[t]=[i,s]);s.push(n[2]=a);var o=i.p+i.u(t),r=Error();i.l(o,function(s){if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var a=s&&("load"===s.type?"missing":s.type),o=s&&s.target&&s.target.src;r.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",r.name="ChunkLoadError",r.type=a,r.request=o,n[1](r)}},"chunk-"+t,t)}},i.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[o,r,l]=s,d=0;if(o.some(t=>0!==e[t])){for(n in r)i.o(r,n)&&(i.m[n]=r[n]);if(l)var h=l(i)}for(t&&t(s);d<o.length;d++)a=o[d],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(h)},s=self.webpackChunkdelixia=self.webpackChunkdelixia||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),i.ruid="bundler=rspack@1.3.0";var s=i.O(void 0,["3361","7978"],function(){return i(57706)});s=i.O(s)})();