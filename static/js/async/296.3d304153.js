"use strict";(self.webpackChunkdelixia=self.webpackChunkdelixia||[]).push([["296"],{26772:function(e,t,r){r.r(t),r.d(t,{_TGATextureLoader:()=>h});var a=r(11597);function i(e){let t=0;return{id_length:e[t++],colormap_type:e[t++],image_type:e[t++],colormap_index:e[t++]|e[t++]<<8,colormap_length:e[t++]|e[t++]<<8,colormap_size:e[t++],origin:[e[t++]|e[t++]<<8,e[t++]|e[t++]<<8],width:e[t++]|e[t++]<<8,height:e[t++]|e[t++]<<8,pixel_size:e[t++],flags:e[t++]}}function n(e,t){let r,n,h,l,g,s,f,c;if(t.length<19){a.Y.Error("Unable to load TGA file - Not enough data to contain header");return}let u=18,d=i(t);if(d.id_length+u>t.length){a.Y.Error("Unable to load TGA file - Not enough data");return}u+=d.id_length;let w=!1,b=!1,_=!1;switch(d.image_type){case 9:w=!0;case 1:b=!0;break;case 10:w=!0;case 2:break;case 11:w=!0;case 3:_=!0}let p=d.pixel_size>>3,y=d.width*d.height*p;if(b&&(n=t.subarray(u,u+=d.colormap_length*(d.colormap_size>>3))),w){let e,a,i;r=new Uint8Array(y);let n=0,o=new Uint8Array(p);for(;u<y&&n<y;)if(a=(127&(e=t[u++]))+1,128&e){for(i=0;i<p;++i)o[i]=t[u++];for(i=0;i<a;++i)r.set(o,n+i*p);n+=p*a}else{for(a*=p,i=0;i<a;++i)r[n+i]=t[u++];n+=a}}else r=t.subarray(u,u+=b?d.width*d.height:y);switch((48&d.flags)>>4){default:case 2:h=0,g=1,c=d.width,l=0,s=1,f=d.height;break;case 0:h=0,g=1,c=d.width,l=d.height-1,s=-1,f=-1;break;case 3:h=d.width-1,g=-1,c=-1,l=0,s=1,f=d.height;break;case 1:h=d.width-1,g=-1,c=-1,l=d.height-1,s=-1,f=-1}let m=o["_getImageData"+(_?"Grey":"")+d.pixel_size+"bits"](d,n,r,l,s,f,h,g,c);e.getEngine()._uploadDataToTextureDirectly(e,m)}let o={GetTGAHeader:i,UploadContent:n,_getImageData8bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f,c=0,u,d,w=new Uint8Array(g*s*4);for(d=a;d!==n;d+=i)for(u=o;u!==l;u+=h,c++)f=r[c],w[(u+g*d)*4+3]=255,w[(u+g*d)*4+2]=t[3*f+0],w[(u+g*d)*4+1]=t[3*f+1],w[(u+g*d)*4+0]=t[3*f+2];return w},_getImageData16bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f,c=0,u,d,w=new Uint8Array(g*s*4);for(d=a;d!==n;d+=i)for(u=o;u!==l;u+=h,c+=2){let e=((31744&(f=r[c+0]+(r[c+1]<<8)))>>10)*255/31|0,t=((992&f)>>5)*255/31|0,a=(31&f)*255/31|0;w[(u+g*d)*4+0]=e,w[(u+g*d)*4+1]=t,w[(u+g*d)*4+2]=a,w[(u+g*d)*4+3]=32768&f?0:255}return w},_getImageData24bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f=0,c,u,d=new Uint8Array(g*s*4);for(u=a;u!==n;u+=i)for(c=o;c!==l;c+=h,f+=3)d[(c+g*u)*4+3]=255,d[(c+g*u)*4+2]=r[f+0],d[(c+g*u)*4+1]=r[f+1],d[(c+g*u)*4+0]=r[f+2];return d},_getImageData32bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f=0,c,u,d=new Uint8Array(g*s*4);for(u=a;u!==n;u+=i)for(c=o;c!==l;c+=h,f+=4)d[(c+g*u)*4+2]=r[f+0],d[(c+g*u)*4+1]=r[f+1],d[(c+g*u)*4+0]=r[f+2],d[(c+g*u)*4+3]=r[f+3];return d},_getImageDataGrey8bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f,c=0,u,d,w=new Uint8Array(g*s*4);for(d=a;d!==n;d+=i)for(u=o;u!==l;u+=h,c++)f=r[c],w[(u+g*d)*4+0]=f,w[(u+g*d)*4+1]=f,w[(u+g*d)*4+2]=f,w[(u+g*d)*4+3]=255;return w},_getImageDataGrey16bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f=0,c,u,d=new Uint8Array(g*s*4);for(u=a;u!==n;u+=i)for(c=o;c!==l;c+=h,f+=2)d[(c+g*u)*4+0]=r[f+0],d[(c+g*u)*4+1]=r[f+0],d[(c+g*u)*4+2]=r[f+0],d[(c+g*u)*4+3]=r[f+1];return d}};class h{constructor(){this.supportCascades=!1}loadCubeData(){throw".env not supported in Cube."}loadData(e,t,r){let a=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o=i(a);r(o.width,o.height,t.generateMipMaps,!1,()=>{n(t,a)})}}}}]);