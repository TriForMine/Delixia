"use strict";(self.webpackChunkdelixia=self.webpackChunkdelixia||[]).push([["5105"],{92278:function(t,e,i){i.r(e),i.d(e,{FlowGraphInterpolationBlock:()=>u});var a=i(98729),n=i(5114),s=i(56945),r=i(16118);class u extends a.A{constructor(t={}){super(t),this.keyFrames=[];let e="string"==typeof t?.animationType?(0,n._M)(t.animationType):(0,n.fs)(t?.animationType??0),i=t?.keyFramesCount??1,a=this.registerDataInput("duration_0",n.ab,0),s=this.registerDataInput("value_0",e);this.keyFrames.push({duration:a,value:s});for(let a=1;a<i+1;a++){let s=this.registerDataInput(`duration_${a}`,n.ab,a===i?t.duration:void 0),r=this.registerDataInput(`value_${a}`,e);this.keyFrames.push({duration:s,value:r})}this.initialValue=this.keyFrames[0].value,this.endValue=this.keyFrames[i].value,this.easingFunction=this.registerDataInput("easingFunction",n.s8),this.animation=this.registerDataOutput("animation",n.s8),this.propertyName=this.registerDataInput("propertyName",n.s8,t?.propertyName),this.customBuildAnimation=this.registerDataInput("customBuildAnimation",n.s8)}_updateOutputs(t){let e=t._getGlobalContextVariable("interpolationAnimations",[]),i=this.propertyName.getValue(t),a=this.easingFunction.getValue(t),n=this._createAnimation(t,i,a);if(this.animation.setValue(n,t),Array.isArray(n))for(let t of n)e.push(t.uniqueId);else e.push(n.uniqueId);t._setGlobalContextVariable("interpolationAnimations",e)}_createAnimation(t,e,i){let a=this.initialValue.richType,n=[],r=this.initialValue.getValue(t)||a.defaultValue;n.push({frame:0,value:r});let u=this.config?.numberOfKeyFrames??1;for(let e=1;e<u+1;e++){let i=this.keyFrames[e].duration?.getValue(t),s=this.keyFrames[e].value?.getValue(t);e===u-1&&(s=s||a.defaultValue),void 0!==i&&s&&n.push({frame:60*i,value:s})}let o=this.customBuildAnimation.getValue(t);if(o)return o()(n,60,a.animationType,i);if("string"!=typeof e)return e.map(t=>{let e=s.fw.CreateAnimation(t,a.animationType,60,i);return e.setKeys(n),e});{let t=s.fw.CreateAnimation(e,a.animationType,60,i);return t.setKeys(n),[t]}}getClassName(){return"FlowGraphInterpolationBlock"}}(0,r.H7)("FlowGraphInterpolationBlock",u)}}]);