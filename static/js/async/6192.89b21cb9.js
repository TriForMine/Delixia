"use strict";(self.webpackChunkdelixia=self.webpackChunkdelixia||[]).push([["6192"],{60977:function(e,l,n){n.r(l),n.d(l,{_IESTextureLoader:()=>i});var t=n(52409);function a(e){return e.split(" ").filter(e=>""!==e).map(e=>parseFloat(e))}function r(e,l,n){for(;n.length!==l;){let l=a(e.lines[e.index++]);n.push(...l)}}class i{constructor(){this.supportCascades=!1}loadCubeData(){throw".ies not supported in Cube."}loadData(e,l,n){let i=function(e){let l={lines:new TextDecoder("utf-8").decode(e).split("\n"),index:0},n={version:l.lines[0],candelaValues:[],horizontalAngles:[],verticalAngles:[],numberOfHorizontalAngles:0,numberOfVerticalAngles:0};for(l.index=1;l.lines.length>0&&!l.lines[l.index].includes("TILT=");)l.index++;l.lines[l.index].includes("INCLUDE"),l.index++;let i=a(l.lines[l.index++]);n.numberOfLights=i[0],n.lumensPerLamp=i[1],n.candelaMultiplier=i[2],n.numberOfVerticalAngles=i[3],n.numberOfHorizontalAngles=i[4],n.photometricType=i[5],n.unitsType=i[6],n.width=i[7],n.length=i[8],n.height=i[9];let s=a(l.lines[l.index++]);n.ballastFactor=s[0],n.fileGenerationType=s[1],n.inputWatts=s[2];for(let e=0;e<n.numberOfHorizontalAngles;e++)n.candelaValues[e]=[];r(l,n.numberOfVerticalAngles,n.verticalAngles),r(l,n.numberOfHorizontalAngles,n.horizontalAngles);for(let e=0;e<n.numberOfHorizontalAngles;e++)r(l,n.numberOfVerticalAngles,n.candelaValues[e]);let o=-1;for(let e=0;e<n.numberOfHorizontalAngles;e++)for(let l=0;l<n.numberOfVerticalAngles;l++)n.candelaValues[e][l]*=n.candelaValues[e][l]*n.candelaMultiplier*n.ballastFactor*n.fileGenerationType,o=Math.max(o,n.candelaValues[e][l]);if(o>0)for(let e=0;e<n.numberOfHorizontalAngles;e++)for(let l=0;l<n.numberOfVerticalAngles;l++)n.candelaValues[e][l]/=o;let u=new Float32Array(64800),f=n.horizontalAngles[0],c=n.horizontalAngles[n.numberOfHorizontalAngles-1];for(let e=0;e<64800;e++){let l=e%360,a=Math.floor(e/360);c-f!=0&&(l<f||l>=c)&&(l%=2*c)>c&&(l=2*c-l),u[a+180*l]=function(e,l,n){let a=0,r=0,i=0,s=0,o=0,u=0;for(let l=0;l<e.numberOfHorizontalAngles-1;l++)if(n<e.horizontalAngles[l+1]||l===e.numberOfHorizontalAngles-2){r=l,i=e.horizontalAngles[l],s=e.horizontalAngles[l+1];break}for(let n=0;n<e.numberOfVerticalAngles-1;n++)if(l<e.verticalAngles[n+1]||n===e.numberOfVerticalAngles-2){a=n,o=e.verticalAngles[n],u=e.verticalAngles[n+1];break}let f=s-i,c=u-o;if(0===c)return 0;let d=0===f?0:(n-i)/f,g=(l-o)/c,A=0===f?r:r+1,b=(0,t.Lerp)(e.candelaValues[r][a],e.candelaValues[A][a],d),h=(0,t.Lerp)(e.candelaValues[r][a+1],e.candelaValues[A][a+1],d);return(0,t.Lerp)(b,h,g)}(n,a,l)}return{width:180,height:1,data:u}}(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));n(i.width,i.height,!1,!1,()=>{let e=l.getEngine();l.type=1,l.format=6,l._gammaSpace=!1,e._uploadDataToTextureDirectly(l,i.data)})}}}}]);