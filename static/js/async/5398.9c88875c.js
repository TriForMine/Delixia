"use strict";(self.webpackChunkdelixia=self.webpackChunkdelixia||[]).push([["5398"],{54040:function(t,e,i){i.r(e),i.d(e,{FlowGraphJsonPointerParserBlock:()=>h});var r=i(5126),s=i(5114);let a=new RegExp(/\/\{(\w+)\}\//g);class o{constructor(t,e){this.path=t,this.ownerBlock=e,this.templatedInputs=[];let i=a.exec(t),o=new Set;for(;i;){let[,n]=i;if(o.has(n))throw Error("Duplicate template variable detected.");o.add(n),this.templatedInputs.push(e.registerDataInput(n,s.fj,new r.K(0))),i=a.exec(t)}}getAccessor(t,e){let i=this.path;for(let t of this.templatedInputs){let r=t.getValue(e).value;if("number"!=typeof r||r<0)throw Error("Invalid value for templated input.");i=i.replace(`{${t.name}}`,r.toString())}return t.convert(i)}}var n=i(16118),l=i(92962),u=i(46954);class h extends u.D{constructor(t){super(s.s8,t),this.config=t,this.object=this.registerDataOutput("object",s.s8),this.propertyName=this.registerDataOutput("propertyName",s.s8),this.setterFunction=this.registerDataOutput("setFunction",s.s8,this._setPropertyValue.bind(this)),this.getterFunction=this.registerDataOutput("getFunction",s.s8,this._getPropertyValue.bind(this)),this.generateAnimationsFunction=this.registerDataOutput("generateAnimationsFunction",s.s8,this._getInterpolationAnimationPropertyInfo.bind(this)),this.templateComponent=new o(t.jsonPointer,this)}_doOperation(t){let e=this.templateComponent.getAccessor(this.config.pathConverter,t),i=e.info.get(e.object),r=e.info.getTarget?.(e.object),s=e.info.getPropertyName?.[0](e.object);if(r)this.object.setValue(r,t),s&&this.propertyName.setValue(s,t);else throw Error("Object is undefined");return i}_setPropertyValue(t,e,i,r){let s=this.templateComponent.getAccessor(this.config.pathConverter,r),a=s.info.type;a.startsWith("Color")&&(i=p(i,a)),s.info.set?.(i,s.object)}_getPropertyValue(t,e,i){let r=this.templateComponent.getAccessor(this.config.pathConverter,i);return r.info.get(r.object)}_getInterpolationAnimationPropertyInfo(t,e,i){let r=this.templateComponent.getAccessor(this.config.pathConverter,i);return(t,e,i,s)=>{let a=[],o=r.info.type;return o.startsWith("Color")&&(t=t.map(t=>({frame:t.frame,value:p(t.value,o)}))),r.info.interpolation?.forEach((e,o)=>{let n=r.info.getPropertyName?.[o](r.object)||"Animation-interpolation-"+o,l=t;i!==e.type&&(l=t.map(t=>({frame:t.frame,value:e.getValue(void 0,t.value.asArray?t.value.asArray():[t.value],0,1)}))),e.buildAnimations(r.object,n,60,l).forEach(t=>{s&&t.babylonAnimation.setEasingFunction(s),a.push(t.babylonAnimation)})}),a}}getClassName(){return"FlowGraphJsonPointerParserBlock"}}function p(t,e){return t.getClassName().startsWith("Color")?t:"Color3"===e?new l.Wo(t.x,t.y,t.z):"Color4"===e?new l.HE(t.x,t.y,t.z,t.w):t}(0,n.H7)("FlowGraphJsonPointerParserBlock",h)},46954:function(t,e,i){i.d(e,{D:()=>n});var r=i(98729),s=i(5114);let a="cachedOperationValue",o="cachedExecutionId";class n extends r.A{constructor(t,e){super(e),this.value=this.registerDataOutput("value",t),this.isValid=this.registerDataOutput("isValid",s.PE)}_updateOutputs(t){let e=t._getExecutionVariable(this,o,-1),i=t._getExecutionVariable(this,a,null);if(null!=i&&e===t.executionId)this.isValid.setValue(!0,t),this.value.setValue(i,t);else try{let e=this._doOperation(t);if(null==e){this.isValid.setValue(!1,t);return}t._setExecutionVariable(this,a,e),t._setExecutionVariable(this,o,t.executionId),this.value.setValue(e,t),this.isValid.setValue(!0,t)}catch(e){this.isValid.setValue(!1,t)}}}}}]);